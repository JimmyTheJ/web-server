(function(e){function t(t){for(var i,r,a=t[0],l=t[1],c=t[2],d=0,h=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&h.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(i=!1)}i&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={app:0},s=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0496":function(e,t,n){},"0c8b":function(e,t,n){},"0e08":function(e,t,n){},1702:function(e,t,n){"use strict";n("adb8")},2904:function(e,t,n){},"326c":function(e,t,n){"use strict";n("a02e")},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=s,e.exports=o,o.id="4678"},"49f5":function(e,t,n){},"4ea0":function(e,t,n){"use strict";n("cf39")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),o=n("00e7"),s=n.n(o),r=n("31bd"),a=n("f309");i["default"].use(a["a"]);var l=new a["a"]({icons:{iconfont:"fa"}}),c=(n("bf40"),n("ad3d")),u=(n("d3b7"),n("1a9a")),d={install:function(e){var t=(new u["a"]).withUrl("".concat("https://localhost:7757","/chat-hub")).configureLogging(u["b"].Information).build(),n=new e;e.prototype.$chatHub=n,t.on("SendMessage",(function(e){n.$emit("message-received",e)})),t.on("ReadMessage",(function(e){n.$emit("read-receipt-received",e)}));var i=null;function o(){return i=t.start().catch((function(e){return console.error("Failed to connect with hub",e),new Promise((function(e,t){return setTimeout((function(){return o().then(e).catch(t)}),5e3)}))})),i}return t.onclose((function(){return o()})),o(),t}},h=(n("b0c0"),n("8c4f")),f={Name:{Admin:"Administrator",Elevated:"Elevated",General:"User",Default:"",None:"None"},Level:{Admin:3,Elevated:2,General:1,Default:0,None:-2}},p={RefreshTokenTimer:6e4},m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container"},[n("h1",{staticClass:"text-xs-center"},[e._v("Jimmy's Webserver")]),n("router-view"),"login"===e.$route.name&&"development"===e.env?n("div",{staticClass:"text-xs-center ma-1"},[n("p",[e._v("No account ? "),n("router-link",{attrs:{to:"register"}},[e._v("Register here")])],1)]):"register"===e.$route.name?n("div",{staticClass:"text-xs-center ma-1"},[n("p",[e._v("If you already have an account you can "),n("router-link",{attrs:{to:"login"}},[e._v("Login")])],1)]):e._e()],1)},v=[],g={data:function(){return{env:"production"}},created:function(){"/"===this.$route.fullPath&&this.$router.push({name:"login"})}},b=g,x=n("2877"),y=Object(x["a"])(b,m,v,!1,null,null,null),w=y.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[e.error?n("v-alert",{attrs:{value:!0,type:"error",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v("Username or password incorrect")]):e._e(),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:e.rules.username,label:"Username",name:"Username",required:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),n("v-text-field",{attrs:{"append-icon":e.passwordOn?"visibility":"visibility_off",type:e.passwordOn?"password":"text",name:"Password",rules:e.rules.password,label:"Password",required:""},on:{"click:append":function(t){e.passwordOn=!e.passwordOn}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),n("v-btn",{attrs:{disabled:!e.valid||e.btnClicked},on:{click:function(t){return t.preventDefault(),e.login()}}},[e._v("Login")])],1)],1)},k=[],L=n("1da1"),$=(n("96cf"),n("5319"),n("ac1f"),n("159b"),n("b64b"),n("2f62"));i["default"].use($["a"]);var j=new $["a"].Store({state:{},mutations:{},actions:{},modules:{}}),O={methods:{$_console_log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!1},$_console_group:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!1}}},C={methods:{$_auth_checkLogin:function(e){return O.methods.$_console_log("[Authentication mixin] $_auth_checkLogin: Called"),j.state.auth.isAuthorize&&this.$router.replace(this.$route.query.redirect||"/home"),e},$_auth_login:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return O.methods.$_console_log("[Authentication mixin] $_auth_login: Called"),i=!1,n.next=4,t.$store.dispatch("signin",e).then(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("getAllOtherUsers").then((function(){return O.methods.$_console_log("Got user list")})).catch((function(){return O.methods.$_console_log("Failed to get user list")})),e.next=3,t.$store.dispatch("getModules").then((function(){return O.methods.$_console_log("Got user modules")})).catch((function(){return O.methods.$_console_log("Failed to get user modules")}));case 3:t.$_auth_checkLogin(i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$store.dispatch("signout"),i=!0}));case 4:case"end":return n.stop()}}),n)})))()},$_auth_register:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return O.methods.$_console_log("[Authentication mixin] $_auth_register: Called",e),n.next=3,t.$store.dispatch("register",e).then((function(e){})).catch((function(){return O.methods.$_console_log("Error registering"),Promise.reject("Failed to create user")}));case 3:case"end":return n.stop()}}),n)})))()},$_auth_logout:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return O.methods.$_console_log("[Authentication mixin] $_auth_logout: Called"),t.next=3,e.$store.dispatch("signout").then((function(){})).catch((function(){return O.methods.$_console_log("logout fail")})).then((function(){return e.$router.push({name:"index"})}));case 3:case"end":return t.stop()}}),t)})))()},$_auth_convertRole:function(e){O.methods.$_console_log("[Authentication mixin] $_auth_convertRole: Called");var t=f.Level.Default;return"undefined"===typeof e||null===e?f.Level.Default:(Object.keys(f.Level).forEach((function(n,i){f.Name[n]==e&&(t=f.Level[n])})),O.methods.$_console_log("[Authentication] convertRole: ".concat(t)),t)}}},T={data:function(){return{form:{username:"",password:"",checked:!1},passwordOn:!0,show:!0,valid:!0,btnClicked:!1,rules:{username:[function(e){return!!e||"Required"}],password:[function(e){return!!e||"Required"}]},error:!1}},mixins:[C],beforeDestroy:function(){window.removeEventListener("keyup",this.enterKeyListener)},mounted:function(){window.addEventListener("keyup",this.enterKeyListener)},methods:{enterKeyListener:function(e){13===e.keyCode&&this.valid&&!this.btnClicked&&this.login()},login:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.btnClicked=!0,t.next=3,e.$_auth_login(e.form).then((function(){e.error=!1})).catch((function(){e.error=!0})).then((function(){return e.btnClicked=!1}));case 3:case"end":return t.stop()}}),t)})))()}}},D=T,M=n("6544"),A=n.n(M),B=n("0798"),S=n("8336"),F=n("a523"),I=n("4bd4"),N=n("8654"),R=Object(x["a"])(D,_,k,!1,null,null,null),V=R.exports;A()(R,{VAlert:B["a"],VBtn:S["a"],VContainer:F["a"],VForm:I["a"],VTextField:N["a"]});var E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[e.error?n("v-alert",{attrs:{value:!0,type:"error",dismissible:""},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v("There was an error registering you")]):e._e(),e.success?n("v-alert",{attrs:{value:!0,type:"success",dismissible:""},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v("User "+e._s(e.form.username)+" successfully created")]):e._e(),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{rules:e.rules.username,label:"Username",name:"Username",required:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),n("v-text-field",{attrs:{name:"Password",label:"Password","append-icon":e.passwordOn?"visibility":"visibility_off",type:e.passwordOn?"password":"text",rules:e.rules.password,required:""},on:{"click:append":function(t){e.passwordOn=!e.passwordOn}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),n("v-text-field",{attrs:{name:"ConfirmPassword",label:"Confirm Password","append-icon":e.passwordConfirmOn?"visibility":"visibility_off",type:e.passwordConfirmOn?"password":"text",rules:e.rules.confirmPassword,required:""},on:{"click:append":function(t){e.passwordConfirmOn=!e.passwordConfirmOn}},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}}),n("v-select",{attrs:{items:e.getRoleList,label:"Role",name:"Role","single-line":""},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}}),n("v-btn",{attrs:{disabled:!e.valid||e.btnClicked},on:{click:function(t){return t.preventDefault(),e.register()}}},[e._v("Register")])],1)],1)},W=[],U={mixins:[C],data:function(){return{passwordOn:!0,passwordConfirmOn:!0,form:{username:"",password:"",confirmPassword:"",role:null},rules:{username:[],password:[],confirmPassword:[]},show:!0,valid:!0,btnClicked:!1,error:!1,success:!1}},computed:{getRoleList:function(){return[{value:"Administrator",text:"Administrator"},{value:"Elevated",text:"Elevated"},{value:"User",text:"User"}]}},beforeDestroy:function(){window.removeEventListener("keyup",this.enterKeyListener)},mounted:function(){window.addEventListener("keyup",this.enterKeyListener),this.form.role=this.getRoleList[0].value},methods:{enterKeyListener:function(e){13===e.keyCode&&this.valid&&!this.btnClicked&&this.register()},register:function(){var e=this;this.btnClicked=!0,this.$_auth_register(this.form).then((function(){e.error=!1,e.success=!0})).catch((function(){e.error=!0,e.success=!1})).then((function(){return e.btnClicked=!1}))}}},P=U,z=n("b974"),H=Object(x["a"])(P,E,W,!1,null,null,null),q=H.exports;A()(H,{VAlert:B["a"],VBtn:S["a"],VContainer:F["a"],VForm:I["a"],VSelect:z["a"],VTextField:N["a"]});var G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("main-menu",{attrs:{source:"home"}}),n("router-view",{key:e.$route.fullPath}),n("notification-bar")],1)},J=[],Y=n("53ca"),K=n("5530"),Q=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-navigation-drawer",{staticClass:"grey lighten-4",staticStyle:{top:"56px",overflow:"hidden"},attrs:{"disable-resize-watcher":"",width:"150",height:e.getDrawerHeight,absolute:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{light:""}},[e._l(e.routes.children,(function(t){return[e.authorized(t)&&!t.meta.hidden?n("v-list-item",{attrs:{to:{name:t.name}},on:{click:function(t){e.drawer=!1}}},[n("v-list-item-content",[e._v(" "+e._s(t.display)+" ")])],1):e._e()]}))],2)],1),n("v-app-bar",{attrs:{color:"purple",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),t.preventDefault(),e.drawer=!e.drawer}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:"xs"!==e.$vuetify.breakpoint.name,expression:"$vuetify.breakpoint.name !== 'xs'"}]},[n("v-toolbar-items",{attrs:{dark:""}},e._l(e.routes.children,(function(t,i){return n("div",{staticClass:"menu-toolbar-item"},[e.authorized(t)?[n("div",{directives:[{name:"show",rawName:"v-show",value:i+1<e.maxMenuItems,expression:"(index+1) < maxMenuItems"}]},[t.meta.hidden?e._e():[n("v-btn",{attrs:{to:{name:t.name},dark:"",text:""}},[e._v(e._s(t.display))]),n("v-divider",{staticClass:"mx-3",attrs:{inset:"",vertical:""}})]],2)]:e._e()],2)})),0)],1),n("v-spacer"),n("v-badge",{attrs:{bordered:"",content:e.numNewMessages,value:e.numNewMessages,"mr-2":""}},[n("v-icon",{attrs:{medium:""},on:{click:function(t){return e.$store.dispatch("openNotifications")}}},[e._v("mdi-bell")])],1),n("v-menu",{attrs:{"close-on-content-click":!0,"nudge-width":200,"offset-x":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:""}},i),[n("v-icon",{attrs:{small:""}},[e._v("fas fa-ellipsis-v")])],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-card",[n("v-list",[n("v-list-item",{attrs:{to:{name:"profile"}}},[n("v-avatar",[e.hasAvatar?n("v-img",{attrs:{src:e.avatarPath}}):n("fa-icon",{attrs:{icon:"user",size:"2x"}})],1),n("v-list-item-title",{staticClass:"ml-2"},[e._v(e._s(e.user.displayName))])],1),n("v-list-item",{on:{click:e.$_auth_logout}},[n("fa-icon",{attrs:{icon:"door-open",size:"2x"}}),n("v-list-item-title",{staticClass:"ml-2"},[e._v("Logout")])],1)],1)],1)],1)],1)],1)}),X=[],Z=(n("99af"),{methods:{$_module_userHasModule:function(e){var t=j.getters.getActiveModules,n=t.find((function(t){return t.id===e.name||"undefined"!==typeof e.meta.relative&&t.id===e.meta.relative}));return"undefined"!==typeof n}}}),ee=n("af87"),te={data:function(){return{routes:[],drawer:!1,menu:!1,menuItems:0,maxMenuItems:0,authLevel:0,screenSize:window.outerWidth}},mixins:[C,Z],props:{source:String},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({modules:function(e){return e.auth.modules},user:function(e){return e.auth.user},numMessages:function(e){return e.notifications.numMessages},numNewMessages:function(e){return e.notifications.numNewMessages},conversations:function(e){return e.chat.conversations}})),{},{getDrawerHeight:function(){return 16+48*this.menuItems},hasAvatar:function(){return"undefined"!==typeof this.user.avatar&&null!==this.user.avatar&&""!==this.user.avatar},avatarPath:function(){return"".concat("https://localhost:7757","/public/").concat(this.user.avatar)}}),created:function(){var e=this;this.getAuthLevel(),this.routes=ms.find((function(t){return t.name===e.source})),this.$_console_log(this.routes),this.getMenuItemCount()},mounted:function(){this.getMaxMenuItems(),window.addEventListener("resize",this.resizeScreen,!1)},beforeDestroy:function(){window.removeEventListener("resize",this.resizeScreen,!1)},methods:{getMaxMenuItems:function(){var e=document.getElementsByClassName("menu-toolbar-item");if("undefined"===typeof e||null===e)return this.$_console_log("Menu items are null or empty"),1;var t=0;e.forEach((function(e){"undefined"!==typeof e.clientWidth&&(t+=e.clientWidth)}));var n=t/e.length;this.maxMenuItems=Math.floor((this.screenSize-96)/n)},resizeScreen:function(e){this.screenSize=window.outerWidth,this.getMaxMenuItems()},getAuthLevel:function(){var e=this.$store.state.auth.role;e===f.Name.Admin?this.authLevel=f.Level.Admin:e===f.Name.Elevated?this.authLevel=f.Level.Elevated:e===f.Name.General?this.authLevel=f.Level.General:this.authLevel=f.Level.Default},authorized:function(e){return!(e.meta.authLevel>this.authLevel)&&(e.meta.authLevel<=f.Level.Default||(this.authLevel===f.Level.Admin&&e.meta.authLevel===f.Level.Admin||this.$_module_userHasModule(e)))},getMenuItemCount:function(){this.$_console_log("[Menu] Get Menu Count.");for(var e=0;e<this.routes.children.length;e++){var t=this.authorized(this.routes.children[e]);t&&!this.routes.children[e].meta.hidden&&this.menuItems++}}}},ne=te,ie=n("40dc"),oe=n("5bc1"),se=n("8212"),re=n("4ca6"),ae=n("b0af"),le=n("ce7e"),ce=n("132d"),ue=n("adda"),de=n("8860"),he=n("da13"),fe=n("5d23"),pe=n("e449"),me=n("f774"),ve=n("2fa4"),ge=n("2a7f"),be=Object(x["a"])(ne,Q,X,!1,null,null,null),xe=be.exports;A()(be,{VAppBar:ie["a"],VAppBarNavIcon:oe["a"],VAvatar:se["a"],VBadge:re["a"],VBtn:S["a"],VCard:ae["a"],VDivider:le["a"],VIcon:ce["a"],VImg:ue["a"],VList:de["a"],VListItem:he["a"],VListItemContent:fe["a"],VListItemTitle:fe["b"],VMenu:pe["a"],VNavigationDrawer:me["a"],VSpacer:ve["a"],VToolbarItems:ge["a"]});var ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-bottom-sheet",{attrs:{inset:"",dark:""},model:{value:e.sheet,callback:function(t){e.sheet=t},expression:"sheet"}},[n("v-sheet",{staticClass:"text-center scrolling-y",attrs:{height:"160px"}},[n("v-btn",{on:{click:function(t){e.sheet=!e.sheet}}},[e._v("Close")]),e._l(e.reversedMessages,(function(t){return n("div",{key:t.id,staticClass:"scroll-y"},[n("div",{class:[e.getMessageBackground(t.read),"my-1"]},[n("v-banner",{scopedSlots:e._u([{key:"actions",fn:function(){return[n("fa-icon",{staticClass:"mr-2 mb-2",attrs:{color:"#555555",icon:"times"},on:{click:function(n){return e.deleteMessage(t)}}})]},proxy:!0}],null,!0)},[e.messageHasGroupNum(t.group)?n("v-avatar",{attrs:{color:"orange",size:"40"}},[n("span",{staticClass:"white--text headline"},[e._v(e._s(t.group.num))])]):e._e(),n("span",{class:e.getTextColor(t.read),on:{click:function(n){return e.readMessage(t)}}},[e._v(e._s(t.text))])],1)],1)])}))],2)],1)},we=[],_e=(n("fb6a"),{data:function(){return{sheet:!1,isLoading:!1,reversedMessages:[]}},computed:Object(K["a"])({},Object($["b"])({messages:function(e){return e.notifications.messages},opened:function(e){return e.notifications.opened}})),watch:{opened:function(e){var t=this;this.isLoading=!0,this.sheet=e,setTimeout((function(){t.isLoading=!1}),5)},sheet:function(e){this.isLoading||this.$store.dispatch("openNotifications",e)},messages:{handler:function(e){this.$_console_log("Messages watcher:",e),this.reversedMessages=e.slice(0).reverse()},deep:!0}},created:function(){this.reversedMessages=this.messages.slice(0).reverse()},methods:{deleteMessage:function(e){this.$_console_log("[Notification Bar] Delete Message with id: ".concat(e.id)),this.$store.dispatch("popNotification",e.id)},readMessage:function(e){this.$_console_log("[Notification Bar] Read Message with id: ".concat(e.id)),this.$store.dispatch("readNotification",e.id)},getTextColor:function(e){return!0===this.$vuetify.theme.dark?e?"white--text":"white--text font-weight-bold":e?"black--text":"black--text font-weight-bold"},getMessageBackground:function(e){return!0===this.$vuetify.theme.dark?e?"grey darken-3":"grey":e?"grey lighten-3":"grey"},messageHasGroupNum:function(e){return!(null===e||e.num<2)}}}),ke=_e,Le=(n("4ea0"),n("e4e5")),$e=n("288c"),je=n("8dd9"),Oe=Object(x["a"])(ke,ye,we,!1,null,"64cf46a3",null),Ce=Oe.exports;A()(Oe,{VAvatar:se["a"],VBanner:Le["a"],VBottomSheet:$e["a"],VBtn:S["a"],VSheet:je["a"]});var Te={data:function(){return{}},components:{"main-menu":xe,"notification-bar":Ce},computed:Object(K["a"])({},Object($["b"])({user:function(e){return e.auth.user},conversations:function(e){return e.chat.conversations}})),created:function(){this.$store.state.auth.isAuthorize||this.$router.push("/"),"/home"===this.$route.fullPath&&this.$router.push({name:"start"}),this.getUserConversations(),this.$chatHub.$on("message-received",this.onMessageReceived)},beforeDestroy:function(){this.$chatHub.$off("message-received",this.onMessageReceived)},methods:{onMessageReceived:function(e){var t=this;if("object"===Object(Y["a"])(e)&&null!==e){var n=this.conversations.find((function(t){return t.id===e.conversationId}));e.userId!==this.user.id&&"undefined"!==typeof n&&Array.isArray(n.conversationUsers)&&"undefined"!==typeof n.conversationUsers.find((function(e){return e.userId===t.user.id}))&&(this.$store.dispatch("incrementConversationUnreadMessageCount",n.id),this.$store.dispatch("pushNotification",{text:"You have new messages from ".concat(n.title),type:1,group:{type:"chat",value:n.title}}))}},getUserConversations:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getAllConversationsForUser").then((function(t){e.$store.dispatch("getNewConversationNotifications").then((function(t){e.$_console_log("New message notifications:",t.data),e.buildNotificationList(t.data)})).catch((function(){return e.$_console_log("No new message notifications")}))}));case 2:case"end":return t.stop()}}),t)})))()},buildNotificationList:function(e){var t=this;Array.isArray(e)&&0!==e.length&&e.forEach((function(e){if(Array.isArray(e.messages)&&e.messages.length>0){var n={text:"You have new messages from ".concat(e.title),type:1,group:{type:"chat",value:e.title}};t.$store.dispatch("pushNotification",n)}}))}}},De=Te,Me=Object(x["a"])(De,G,J,!1,null,null,null),Ae=Me.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-xs-center"},[n("h1",{staticClass:"orange--text text--darken-3 display-2 mt-3"},[e._v("Welcome to "+e._s(e.name))])])},Se=[],Fe="Jimmys Server",Ie={data:function(){return{name:Fe}}},Ne=Ie,Re=Object(x["a"])(Ne,Be,Se,!1,null,null,null),Ve=Re.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-card",[n("v-card-title",{staticClass:"headline text-center"},[n("div",[e._v("User Id: "+e._s(e.user.id))]),n("v-spacer"),n("label",{staticClass:"upload-button",attrs:{id:"upload-button",for:"upload-files"}},[n("v-avatar",[e.hasAvatar?n("v-img",{attrs:{src:e.avatarPath}}):n("v-icon",{attrs:{dark:""}},[e._v("fas fa-user")])],1)],1),n("input",{ref:"fUpload",attrs:{type:"file",name:"upload-files",id:"upload-files",hidden:""},on:{change:e.uploadAvatarImage}})],1),n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs4:""}},[e._v(" Display name: ")]),!1===e.editDisplayName?n("v-flex",{attrs:{xs8:""},on:{click:function(t){e.editDisplayName=!e.editDisplayName}}},[e._v(" "+e._s(e.user.displayName)+" ")]):n("v-flex",{attrs:{xs8:""}},[n("v-text-field",{attrs:{label:"New Display Name"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateDisplayName()},function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.editDisplayName=!1}]},model:{value:e.newDisplayName,callback:function(t){e.newDisplayName=t},expression:"newDisplayName"}})],1)],1)],1)],1)],1)},We=[],Ue={data:function(){return{uploadFile:null,editDisplayName:!1,newDisplayName:""}},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({user:function(e){return e.auth.user}})),{},{hasAvatar:function(){return"undefined"!==typeof this.user.avatar&&null!==this.user.avatar&&""!==this.user.avatar},avatarPath:function(){return"".concat("https://localhost:7757","/public/").concat(this.user.avatar)}}),methods:{uploadAvatarImage:function(e){var t=this,n=e.target.files;if(console.log(n),1===n.length){var i=new FormData;i.append("File",n[0]),this.$store.dispatch("updateAvatarImage",i).then((function(){})).catch((function(){})).then((function(){t.uploadFile=null,t.$refs.fUpload.value=""}))}else this.$_console_log("SetFiles: File list contains more or less than 1 file")},updateDisplayName:function(){var e=this;this.$store.dispatch("updateDisplayName",this.newDisplayName).then((function(){})).catch((function(){})).then((function(){return e.editDisplayName=!1}))}}},Pe=Ue,ze=n("99d9"),He=n("0e8f"),qe=n("a722"),Ge=Object(x["a"])(Pe,Ee,We,!1,null,null,null),Je=Ge.exports;A()(Ge,{VAvatar:se["a"],VCard:ae["a"],VCardText:ze["b"],VCardTitle:ze["c"],VContainer:F["a"],VFlex:He["a"],VIcon:ce["a"],VImg:ue["a"],VLayout:qe["a"],VSpacer:ve["a"],VTextField:N["a"]});var Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-card",[n("v-card-title",[e._v(" Manage User's modules ")]),n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm12:"",md4:""}},[n("v-list-item-group",{model:{value:e.selectedUserPosition,callback:function(t){e.selectedUserPosition=t},expression:"selectedUserPosition"}},e._l(e.userList,(function(t,i){return n("v-list-item",{key:i},[n("v-list-item-content",[e._v(" "+e._s(t.id)+" ")])],1)})),1)],1),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[n("v-list-item-group",{model:{value:e.selectedModulePosition,callback:function(t){e.selectedModulePosition=t},expression:"selectedModulePosition"}},[e._l(e.moduleList,(function(t,i){return[n("v-list-item",{key:i},[n("v-list-item-icon",{on:{click:function(n){return e.addModuleToUser(t)}}},[e.userHasModule(t)?n("fa-icon",{attrs:{icon:"check"}}):n("fa-icon",{attrs:{icon:"times"}})],1),n("v-list-item-content",[e._v(" "+e._s(t.name)+" ")])],1)]}))],2)],1),n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},["object"===typeof e.selectedModule&&null!==e.selectedModule?n("v-list",[e._l(e.selectedModule.features,(function(t,i){return[n("v-list-item",{key:i},[n("v-list-item-icon",{on:{click:function(n){return e.addFeatureToUser(t)}}},[e.userHasFeature(t)?n("fa-icon",{attrs:{icon:"check"}}):n("fa-icon",{attrs:{icon:"times"}})],1),n("v-list-item-content",[e._v(" "+e._s(t.name)+" ")])],1)]}))],2):e._e()],1)],1)],1)],1)],1)},Ke=[],Qe=(n("c740"),n("a434"),n("bc3a")),Xe=n.n(Qe),Ze="https://localhost:7757",et=Xe.a.create({baseURL:Ze,headers:{"Content-Type":"application/json; charset=utf-8"}});et.defaults.timeout=1e4,et.interceptors.request.use(function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=j.state.auth.accessToken,i=j.state.auth.isAuthorize,n&&i&&(t.headers.common["Authorization"]="Bearer "+n),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return O.methods.$_console_group("[Axios][Interceptor] Request Error",e),Promise.reject(e)})),et.interceptors.response.use((function(e){return e}),(function(e){return O.methods.$_console_log("[Axios][Interceptor] Error request, response, then header keys, route fullpath",e.request,e.response,gs.app.$route.fullPath),Promise.reject(e)}));var tt=et,nt="api/account/login",it="api/account/logout",ot="api/account/refresh-jwt",st="api/account/register",rt="api/account/user/get-all",at="api/account/user/get-all-others",lt="api/account/user/update-avatar",ct="api/account/user/update-display-name",ut={signin:function(e){return tt.post(nt,{username:e.username,password:e.password,codeChallenge:e.codeChallenge})},signout:function(e){return tt.post(it,'"'.concat(e,'"'))},refreshToken:function(e,t){return tt.post("".concat(ot),{token:e,codeChallenge:t})},register:function(e){return tt.post(st,{username:e.username,password:e.password,confirmPassword:e.confirmPassword,role:e.role})},getUsers:function(){return tt.get(rt)},getAllOtherUsers:function(){return tt.get(at)},uploadAvatarImage:function(e){return tt.post(lt,e)},updateDisplayName:function(e){return tt.post(ct,'"'.concat(e,'"'))}},dt="api/modules/get-all-modules",ht="api/modules/get-modules-for-user",ft="api/modules/get-modules-for-all-users",pt="get-user-modules-and-features",mt="api/modules/add-module-to-user",vt="api/modules/delete-module-from-user",gt="api/modules/add-feature-to-user",bt="api/modules/delete-feature-from-user",xt={getModulesForUser:function(){return tt.get(ht)},getAllModules:function(){return tt.get(dt)},getAllModulesForAllUser:function(){return tt.get(ft)},getModulesAndFeaturesForUser:function(e){return tt.get(pt,{user:e})},getAllFeaturesForAllUser:function(){return tt.get(getAllFeaturesForAllUserUrl)},addModuleToUser:function(e){return tt.post(mt,e)},deleteModuleFromUser:function(e){return tt.post(vt,e)},addFeatureToUser:function(e){return tt.post(gt,e)},deleteFeatureFromUser:function(e){return tt.post(bt,e)}},yt=n("d4ec"),wt=n("bee2"),_t=(n("3ca3"),n("ddb0"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("a15b"),n("a630"),n("25f0"),function(e){O.methods.$_console_log("[RequiresRefresh] Checking if refresh token is required.");var t=kt(e),n=(new Date).getTime()/1e3;return n>t.exp&&(O.methods.$_console_log("[RequiresRefresh] JWT is expired!"),!0)}),kt=function(e){return JSON.parse(atob(e.split(".")[1]))};var Lt=null,$t=function(){function e(){return Object(yt["a"])(this,e),Lt||(Lt=this),this.queue=[],this.gettingToken=!1,Lt}return Object(wt["a"])(e,[{key:"request",value:function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(O.methods.$_console_log("[DispatchFactory] request call",t),_t(j.state.auth.accessToken)){e.next=8;break}return O.methods.$_console_log("[DispatchFactory] Running request"),e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:return this.queue.push(t),e.next=11,this.getRefreshToken();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"processQueue",value:function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(O.methods.$_console_log("[DispatchFactory] Processing queue..."),t=[],n=0;n<this.queue.length;n++)t.push(this.request(this.queue[n]));Promise.all(t).then((function(e){})).catch((function(){})).then((function(){O.methods.$_console_log("[DispatchFactory] Emptying out promise queue.");for(var e=0;e<t.length;e++)i.queue.shift();O.methods.$_console_log("[DispatchFactory] Removed ".concat(t.length," promises from the queue"))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRefreshToken",value:function(){var e=Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(O.methods.$_console_log("[DispatchFactory] ".concat(this.gettingToken)),!1!==this.gettingToken){e.next=11;break}return this.gettingToken=!0,e.next=5,j.dispatch("refreshToken");case 5:return this.gettingToken=!1,e.next=8,this.processQueue();case 8:return e.abrupt("return",e.sent);case 11:O.methods.$_console_log("[DispatchFactory] We are already getting a refresh token.");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),jt=new $t,Ot={data:function(){return{selectedModule:null,selectedUser:null,selectedUserPosition:null,selectedModulePosition:null,moduleList:[],userList:[],usersHaveModuleList:[],selectedUserModuleList:[],selectedUserFeatureList:[]}},mounted:function(){this.getData()},watch:{selectedUserPosition:function(e){if("undefined"===typeof e||null===e)return this.selectedUser=null,void(this.selectedModule=null);this.selectedModule=null,this.selectedModulePosition=null,this.selectedUser=this.userList[e],this.updateSelectedUserList(this.userList[e])},selectedModulePosition:function(e){this.selectedModule="undefined"!==typeof e&&null!==e?this.moduleList[e]:null}},methods:{getData:function(){var e=this;jt.request((function(){ut.getUsers().then((function(t){e.$_console_log("[admin-tools] getData: Successfully got user list"),e.userList=t.data})).catch((function(){return e.$_console_log("[admin-tools] getData: Failed to get user list")}))})),jt.request((function(){xt.getAllModules().then((function(t){e.$_console_log("[admin-tools] getData: Successfully got module list"),e.moduleList=t.data})).catch((function(){return e.$_console_log("[admin-tools] getData: Failed to get module list")}))})),jt.request((function(){xt.getAllModulesForAllUser().then((function(t){e.$_console_log("[admin-tools] getData: Successfully got user has module list"),e.usersHaveModuleList=t.data})).catch((function(){return e.$_console_log("[admin-tools] getData: Failed to get module lists for users")}))}))},deleteModuleFromUser:function(e){var t=this;if("undefined"===typeof this.selectedUser||null===this.selectedUser)return this.$_console_log("[admin-tools] deleteModuleFromUser: selected user is null"),!1;if("undefined"===typeof e||null===e)return this.$_console_log("[admin-tools] deleteModuleFromUser: module is null"),!1;var n=Object.assign({},this.selectedUser),i={userId:this.selectedUser.id,moduleAddOnId:e.id};jt.request((function(){xt.deleteModuleFromUser(i).then((function(){t.$_console_log("[admin-tools] deleteModuleFromUser: Successfully deleted module from user");var o=t.usersHaveModuleList[i.userId].findIndex((function(t){return t.id===e.id}));o<0?t.$_console_log("[admmin-tools] deleteModuleFromuser: Index doesn't exist"):(t.usersHaveModuleList[i.userId].splice(o,1),t.updateSelectedUserList(n))})).catch((function(){return t.$_console_log("[admin-tools] deleteModuleFromUser: Failed to delete module from user")}))}))},deleteFeatureFromUser:function(e){var t=this;if("undefined"===typeof this.selectedModule||null===this.selectedModule)return this.$_console_log("[admin-tools] deleteFeatureFromUser: selected user is null"),!1;if("undefined"===typeof e||null===e)return this.$_console_log("[admin-tools] deleteFeatureFromUser: module is null"),!1;var n=Object.assign({},this.selectedUser),i={userId:n.id,moduleFeatureId:e.id},o=Object.assign({},this.selectedModule);jt.request((function(){xt.deleteFeatureFromUser(i).then((function(){t.$_console_log("[admin-tools] deleteFeatureFromUser: Successfully deleted feature from user");var n=t.usersHaveModuleList[i.userId].findIndex((function(e){return e.id===o.id}));if(n<0)t.$_console_log("[admmin-tools] deleteFeatureFromUser: Module index doesn't exist");else if(Array.isArray(t.usersHaveModuleList[i.userId][n].features)){var s=t.usersHaveModuleList[i.userId][n].features.findIndex((function(t){return t.id===e.id}));t.$_console_log("[admin-tools] deleteFeatureFromUser: Got feature id, ",s),s<0?t.$_console_log("[admmin-tools] deleteFeatureFromUser: Feature index doesn't exist"):t.usersHaveModuleList[i.userId][n].features.splice(s,1)}else t.$_console_log("[admmin-tools] deleteFeatureFromUser: Selected user doesn't have any features for this module")})).catch((function(e){return t.$_console_log("[admin-tools] deleteFeatureFromUser: Failed to delete feature from user",e)}))}))},addModuleToUser:function(e){var t=this;if(this.userHasModule(e))this.deleteModuleFromUser(e);else{var n=Object.assign({},this.selectedUser),i={userId:n.id,moduleAddOnId:e.id},o=Object.assign({},e);jt.request((function(){xt.addModuleToUser(i).then((function(e){!0===e.data&&(t.$_console_log("[admin-tools] addModuleToUser: Successfully added module to user"),Array.isArray(t.usersHaveModuleList[i.userId])||(t.usersHaveModuleList[i.userId]=[]),o.features=[],t.usersHaveModuleList[i.userId].push(o),t.updateSelectedUserList(n))})).catch((function(){return t.$_console_log("[admin-tools] addModuleToUser: Failed to get add module to user")}))}))}},addFeatureToUser:function(e){var t=this;if(this.userHasFeature(e))this.deleteFeatureFromUser(e);else{var n=Object.assign({},this.selectedUser),i={userId:this.selectedUser.id,moduleFeatureId:e.id};if(Array.isArray(this.usersHaveModuleList[i.userId])){var o=Object.assign({},this.selectedModule),s=this.usersHaveModuleList[i.userId].findIndex((function(e){return e.id===o.id}));s<0?this.$_console_log("[admin-tools] addFeatureToUser: Can't add a feature to a user that doesn't have the corresponding module"):jt.request((function(){xt.addFeatureToUser(i).then((function(o){!0===o.data&&(t.$_console_log("[admin-tools] addFeatureToUser: Successfully added feature to user"),Array.isArray(t.usersHaveModuleList[i.userId][s].features)||(t.usersHaveModuleList[i.userId][s].features=[]),t.usersHaveModuleList[i.userId][s].features.push(e),t.updateSelectedUserList(n))})).catch((function(){return t.$_console_log("[admin-tools] addFeatureToUser: Failed to get add feature to user")}))}))}else this.$_console_log("[admin-tools] addFeatureToUser: Can't add a feature to a user that doesn't have any modules")}},userHasModule:function(e){return"undefined"===typeof this.selectedUser||null===this.selectedUser?(this.$_console_log("[admin-tools] userHasModule: selected user is null"),!1):"undefined"===typeof e||null===e?(this.$_console_log("[admin-tools] userHasModule: module is null"),!1):Array.isArray(this.selectedUserModuleList)?this.selectedUserModuleList.findIndex((function(t){return t.id===e.id}))>=0:(this.$_console_log("[admin-tools] userHasModule: selected user module list is not an array"),!1)},userHasFeature:function(e){var t=this;if("undefined"===typeof this.selectedUser||null===this.selectedUser)return this.$_console_log("[admin-tools] userHasFeature: selected user is null"),!1;if("undefined"===typeof this.selectedModule||null===this.selectedModule)return this.$_console_log("[admin-tools] userHasFeature: selected module is null"),!1;if("undefined"===typeof e||null===e)return this.$_console_log("[admin-tools] userHasFeature: feature is null"),!1;if(!Array.isArray(this.selectedUserModuleList))return this.$_console_log("[admin-tools] userHasModule: selected user module list is not an array"),!1;var n=this.selectedUserModuleList.findIndex((function(e){return e.id===t.selectedModule.id}));if(n<0)return!1;if(Array.isArray(this.selectedUserModuleList[n].features)){var i=this.selectedUserModuleList[n].features.findIndex((function(t){return t.id===e.id}));if(i>=0)return!0}return!1},updateSelectedUserList:function(e){this.$_console_log("Update Selected User List"),this.selectedUserModuleList="undefined"!==typeof e&&null!==e?this.usersHaveModuleList[e.id]:[]}}},Ct=Ot,Tt=n("1baa"),Dt=n("34c3"),Mt=Object(x["a"])(Ct,Ye,Ke,!1,null,null,null),At=Mt.exports;A()(Mt,{VCard:ae["a"],VCardText:ze["b"],VCardTitle:ze["c"],VContainer:F["a"],VFlex:He["a"],VLayout:qe["a"],VList:de["a"],VListItem:he["a"],VListItemContent:fe["a"],VListItemGroup:Tt["a"],VListItemIcon:Dt["a"]});var Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"py-0"},[n("div",{staticClass:"headline"},[e._v("Chat System")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&!e.hideMobile||!e.isMobile,expression:"(isMobile && !hideMobile) || !isMobile"}]},[n("v-row",{attrs:{"no-gutters":"",align:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"9"}},[n("v-autocomplete",{attrs:{items:e.userList,"item-value":"id","item-text":"displayName","prepend-icon":"mdi-database-search",label:"Select user(s)",loading:e.isLoading,"search-input":e.search,multiple:""},model:{value:e.newConversation.users,callback:function(t){e.$set(e.newConversation,"users",t)},expression:"newConversation.users"}})],1),n("v-col",{attrs:{cols:"12",sm:"4",md:"3"}},[n("v-btn",{staticClass:"mb-2",on:{click:e.startConversation}},[e._v("Start Conversation")])],1)],1)],1),n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&!e.hideMobile||!e.isMobile,expression:"(isMobile && !hideMobile)|| !isMobile"}],staticClass:"px-0",attrs:{cols:"12",md:"3",lg:"2"}},[Array.isArray(e.conversations)&&e.conversations.length>0?[n("v-list",{attrs:{shaped:""}},e._l(e.conversations,(function(t,i){return n("v-list-item",{key:i,on:{click:function(n){e.selectedConversation=t}}},[n("v-list-item-icon",[n("chat-badge",{attrs:{conversation:t}})],1),n("v-list-item-content",[e._v(" "+e._s(t.title)+" ")])],1)})),1)]:e._e()],2),n("v-col",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&e.hideMobile||!e.isMobile,expression:"(isMobile && hideMobile)|| !isMobile"}],staticClass:"chat-conversation-window pb-0 px-0 pr-2",attrs:{cols:"12",md:"9",lg:"10"}},[e._l(e.conversations,(function(t,i){return[n("chat-conversation",{attrs:{conversation:t,time:e.currentTime,show:e.shouldShowConversation(t),mobile:e.isMobile},on:{goBack:e.closeConversation}})]}))],2)],1)],1)},St=[],Ft=(n("b65f"),n("4de4"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[n("v-dialog",{attrs:{"max-width":"400"},model:{value:e.deleteConversationDialog,callback:function(t){e.deleteConversationDialog=t},expression:"deleteConversationDialog"}},[n("v-card",[n("v-card-title",[e._v(" Delete Conversation ")]),n("v-card-text",[e._v(" Are you sure you want to delete this conversation ? ")]),n("v-card-actions",[n("v-btn",{on:{click:e.deleteConversation}},[e._v("Yes")]),n("v-btn",{on:{click:function(t){e.deleteConversationDialog=!1}}},[e._v("No")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"640"},model:{value:e.moreInfoDialog,callback:function(t){e.moreInfoDialog=t},expression:"moreInfoDialog"}},[n("v-card",[n("v-card-title",{staticClass:"justify-center"},[n("h3",[e._v("Message Info")])]),n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-flex",{staticClass:"body-1 py-2",attrs:{xs4:""}},[e._v("Message:")]),n("v-flex",{staticClass:"caption py-2",attrs:{xs8:""}},[e._v(e._s(e.moreInfo.text))]),n("v-flex",{staticClass:"body-1 py-2",attrs:{xs4:""}},[e._v("Timestamp:")]),n("v-flex",{staticClass:"caption py-2",attrs:{xs8:""}},[e._v(e._s(e.moreInfo.timestamp))]),n("v-flex",{staticClass:"body-1 py-2",attrs:{xs4:""}},[e._v("User:")]),n("v-flex",{staticClass:"caption py-2",attrs:{xs8:""}},[e._v(e._s(e.moreInfo.username))])],1)],1),n("v-card-actions",[n("v-btn",{on:{click:function(t){e.moreInfoDialog=!1}}},[e._v("Close")])],1)],1)],1),n("div",{attrs:{id:"chat-container"}},[n("v-toolbar",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.mobile,expression:"mobile"}],attrs:{text:""},on:{click:e.goBack}},[n("fa-icon",{attrs:{icon:"reply"}})],1),n("v-btn",{attrs:{text:""},on:{click:function(t){e.editingTitle=!e.editingTitle}}},[n("v-icon",[e._v("mdi-account-edit")])],1),e.editingTitle?n("v-toolbar-title",{staticClass:"ml-3 pl-2",staticStyle:{width:"100%"}},[n("div",{staticStyle:{display:"flex","flex-direction":"row"}},[n("v-text-field",{attrs:{autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.updateTitle(t))}},model:{value:e.newTitle,callback:function(t){e.newTitle=t},expression:"newTitle"}}),e.mobile?e._e():n("v-btn",{on:{click:e.updateTitle}},[e._v("SAVE")])],1)]):n("v-toolbar-title",[e._v(" "+e._s(e.conversation.title)+" ")]),n("v-spacer"),e.isConversationDeletable?n("v-btn",{attrs:{text:""},on:{click:function(t){e.deleteConversationDialog=!0}}},[n("v-icon",[e._v("mdi-delete")])],1):e._e()],1),n("div",{ref:"chatBodyContainer",staticClass:"chat-body-container",style:{height:e.bodyContainerHeight+"px"}},[n("v-row",{staticClass:"px-0"},e._l(e.conversation.messages,(function(t,i){return n("v-col",{key:i,staticClass:"py-1",attrs:{cols:"12"},on:{mouseover:function(n){return e.setMessageHover(t,!0)},mouseleave:function(n){return e.setMessageHover(t,!1)}}},[n("chat-bubble",{attrs:{message:t,currentTime:e.time,owner:e.isOwner(t)},on:{moreInfo:e.openMoreInfo,deleteMessage:e.deleteMessage},scopedSlots:e._u([e.isLastReadMessage(t)?{key:"lastReadIcon",fn:function(){return[n("chat-avatar",{attrs:{conversation:e.conversation,size:"16"}})]},proxy:!0}:null],null,!0)})],1)})),1)],1),n("div",{ref:"chatTextfield",staticClass:"chat-message-textfield"},[n("v-text-field",{ref:"newMessage",staticClass:"pa-0",attrs:{autofocus:"",label:"Message"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))}},scopedSlots:e._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{icon:"",text:""},on:{click:e.sendMessage}},[n("fa-icon",{attrs:{size:"lg",icon:"paper-plane"}})],1)]},proxy:!0}]),model:{value:e.newMessage.text,callback:function(t){e.$set(e.newMessage,"text",t)},expression:"newMessage.text"}})],1)],1)],1)}),It=[],Nt=(n("a9e3"),n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-container"},[n("div",{class:["bubble-container",e.getFlexDirection]},[n("v-menu",{attrs:{absolute:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;t.attr;return[n("div",e._g({staticClass:"order-2"},i),[n("span",{directives:[{name:"show",rawName:"v-show",value:e.message.hover,expression:"message.hover"}],staticClass:"pa-1",staticStyle:{height:"100%",margin:"0 auto"}},[e._v("...")])])]}}])},[n("v-list",[n("v-list-item",{on:{click:e.moreInfo}},[n("v-list-item-title",[e._v(" More info ")])],1),e.isMessageDeletable?n("v-list-item",{on:{click:e.deleteMessage}},[n("v-list-item-title",[e._v(" Delete Message ")])],1):e._e()],1)],1),n("div",{class:["bubble-body-container",e.getColor,"pa-2","order-1"],on:{click:function(t){return e.readMessage()}}},[n("div",{staticClass:"text-body-1"},[e._v(e._s(e.message.text))]),n("div",{staticClass:"text-caption text-right"},[e._v(e._s(e.timeSince))]),n("div",{staticClass:"bubble-id",staticStyle:{display:"none"}},[e._v(e._s(e.message.id))])])],1),n("div",{class:["bubble-last-read",e.getFlexDirection,"pr-2"]},[e._t("lastReadIcon")],2)])}),Rt=[],Vt={data:function(){return{}},props:{message:{type:Object,required:!0},currentTime:{type:Number,required:!1},owner:{type:Boolean,default:!1},lastMessage:{type:Boolean,default:!1}},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({user:function(e){return e.auth.user},activeModules:function(e){return e.auth.activeModules}})),{},{timeSince:function(){if("number"!==typeof this.currentTime||"number"!==typeof this.message.timestamp)return"";var e=this.currentTime-this.message.timestamp;if(e<0)return"";if(e<60)return"".concat(Math.trunc(e),"s");var t=e/60;if(t<60)return"".concat(Math.trunc(t),"m");var n=t/60;if(n<24)return"".concat(Math.trunc(n),"h");var i=n/24;return"".concat(Math.trunc(i),"d")},isMessageDeletable:function(){if(!0===this.owner){var e=this.activeModules.find((function(e){return"chat"===e.id}));if("undefined"!==typeof e){var t=e.userModuleFeatures.find((function(e){return"chat-delete-message"===e.moduleFeatureId}));if("undefined"!==typeof t)return!0}}return!1},getFlexDirection:function(){return this.owner?"flex-right":"flex-left"},getColor:function(){return!0===this.message.highlighted?"highlight":null===this.message.color?this.message.userId===this.user.id?"blue":"green":this.message.color}}),watch:{message:{handler:function(e){var t=this;"undefined"!==typeof e&&!0===e.highlighted&&(this.$_console_log("Message.Highlighted watcher: highlight = true"),setTimeout((function(){t.$store.dispatch("highlightMessage",{messageId:e.id,conversationId:e.conversationId,on:!1})}),6e3))},deep:!0}},methods:{deleteMessage:function(){this.$emit("deleteMessage",this.message.id),this.optionDialog=!1},moreInfo:function(){this.$emit("moreInfo",this.message),this.optionDialog=!1},isMessageReadable:function(){var e=this;if(this.user.id!==this.message.userId){if(!Array.isArray(this.message.readReceipts)||Array.isArray(this.message.readReceipts)&&0===this.message.readReceipts.length)return!0;if("undefined"===typeof this.message.readReceipts.find((function(t){return t.userId===e.user.id})))return!0}return!1},readMessage:function(){this.isMessageReadable()?this.$store.dispatch("readChatMessage",{conversationId:this.message.conversationId,messageId:this.message.id}):this.$_console_log("ReadMessage: Message is not readable")}}},Et=Vt,Wt=(n("9f66"),Object(x["a"])(Et,Nt,Rt,!1,null,"78eda714",null)),Ut=Wt.exports;A()(Wt,{VList:de["a"],VListItem:he["a"],VListItemTitle:fe["b"],VMenu:pe["a"]});var Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.conversation.conversationUsers.length>2?[n("fa-icon",{attrs:{icon:"users",size:"2x"}})]:!1!==e.friendHasAvatar(e.conversation)?[n("v-avatar",{attrs:{size:e.maxSize}},[n("v-img",{attrs:{src:e.friendHasAvatar(e.conversation)}})],1)]:[n("v-avatar",{attrs:{color:e.getFriendColor(e.conversation),size:e.maxSize}},[n("span",{class:["white--text",e.getTextSize()]},[e._v(e._s(e.getFriendAvatarText(e.conversation)))])])]],2)},zt=[],Ht={data:function(){return{maxSize:0}},props:{conversation:{type:Object,required:!0},size:{type:String,required:!1}},computed:Object(K["a"])({},Object($["b"])({user:function(e){return e.auth.user},userList:function(e){return e.auth.otherUsers}})),mounted:function(){"undefined"!==typeof this.size?this.maxSize=this.size:this.maxSize="48"},methods:{friendHasAvatar:function(e){var t=this;if("object"!==Object(Y["a"])(e)||null===e||!Array.isArray(e.conversationUsers))return!1;if(!Array.isArray(this.userList))return!1;var n=e.conversationUsers.find((function(e){return e.userId!==t.user.id}));if("undefined"===typeof n)return!1;var i=this.userList.find((function(e){return e.id===n.userId}));return"undefined"!==typeof i&&("undefined"!==typeof i.avatar&&"".concat("https://localhost:7757","/public/").concat(i.avatar))},getFriendColor:function(e){var t=this,n="blue";if("object"!==Object(Y["a"])(e)||null===e||!Array.isArray(e.conversationUsers))return n;var i=e.conversationUsers.find((function(e){return e.userId!==t.user.id}));return"undefined"===typeof i||null===i.color?n:i.color},getFriendAvatarText:function(e){var t=this;if("object"!==Object(Y["a"])(e)||null===e||!Array.isArray(e.conversationUsers))return!1;if(!Array.isArray(this.userList))return!1;var n=e.conversationUsers.find((function(e){return e.userId!==t.user.id}));if("undefined"===typeof n)return!1;var i=this.userList.find((function(e){return e.id===n.userId}));return"undefined"!==typeof i&&i.displayName.charAt(0)},getTextSize:function(){return this.maxSize>=40?"headline":this.maxSize<40?"caption":void 0}}},qt=Ht,Gt=Object(x["a"])(qt,Pt,zt,!1,null,null,null),Jt=Gt.exports;A()(Gt,{VAvatar:se["a"],VImg:ue["a"]});var Yt="api/chat/conversation/start",Kt="api/chat/conversation/get",Qt="api/chat/conversation/get-all",Xt="api/chat/conversation/notifications/get-all",Zt="api/chat/conversation/update-title",en="api/chat/conversation/delete",tn="api/chat/conversation/get/messages",nn="api/chat/message/delete",on="api/chat/message/get",sn="api/chat/message/send",rn="api/chat/message/read",an={startConversation:function(e){return tt.post(Yt,e)},getConversation:function(e){return tt.get("".concat(Kt,"/").concat(e))},getAllConversations:function(){return tt.get(Qt)},getAllNewMessagesForConversations:function(){return tt.get(Xt)},updateConversationTitle:function(e,t){return tt.post("".concat(Zt,"/").concat(e),{title:t})},deleteConversation:function(e){return tt.request({url:"".concat(en,"/").concat(e),method:"delete"})},getMessagesForConversation:function(e){return tt.get("".concat(tn,"/").concat(e))},deleteMessage:function(e){return tt.request({url:"".concat(nn,"/").concat(e),method:"delete"})},getMessage:function(e){return tt.get("".concat(on,"/").concat(e))},sendMessage:function(e){return tt.post(sn,e)},readMessage:function(e,t){return tt.request({url:"".concat(rn,"/").concat(e,"/").concat(t),method:"put"})},readMessageList:function(e,t){return tt.request({url:"".concat(rn,"/").concat(e,"/list"),method:"put",data:t})}},ln={data:function(){return{newMessage:null,deleteConversationDialog:!1,moreInfoDialog:!1,editingTitle:!1,newTitle:null,moreInfo:{},chatWindow:null,scrollHeight:0,bodyContainerHeight:0,othersLastReadMessage:-1}},components:{"chat-bubble":Ut,"chat-avatar":Jt},props:{conversation:{type:Object,required:!0},time:{type:Number,required:!0},show:{type:Boolean,required:!0},mobile:{type:Boolean,required:!0}},created:function(){this.newMessage={text:""},this.$chatHub.$on("message-received",this.onMessageReceived),this.$chatHub.$on("read-receipt-received",this.onReadReceiptReceived),window.addEventListener("resize",this.resizeWindow)},mounted:function(){this.chatWindow=this.$refs.chatBodyContainer,this.chatWindow.addEventListener("scroll",this.windowScroll)},beforeDestroy:function(){this.$chatHub.$off("message-received",this.onMessageReceived),this.$chatHub.$off("read-receipt-received",this.onReadReceiptReceived),this.chatWindow.removeEventListener("scroll",this.windowScroll),window.removeEventListener("resize",this.resizeWindow)},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({user:function(e){return e.auth.user},activeModules:function(e){return e.auth.activeModules}})),{},{isConversationDeletable:function(){var e=this.activeModules.find((function(e){return"chat"===e.id}));if("undefined"!==typeof e){var t=e.userModuleFeatures.find((function(e){return"chat-delete-conversation"===e.moduleFeatureId}));if("undefined"!==typeof t)return!0}return!1}}),watch:{editingTitle:function(e){this.newTitle=!1===e?null:this.conversation.title},show:function(e){var t=this;!0===e&&this.$store.dispatch("getMessagesForConversation",this.conversation.id).then((function(e){t.updateContainerHeight(!0),t.updateReadReceiptMarker()}))},scrollHeight:function(e){this.show&&this.chatWindow.scrollHeight<=e+this.chatWindow.clientHeight+1&&(this.$_console_log("Max scroll reached. You're at the bottom, reading all messages."),this.readAllMessages())}},methods:{windowScroll:function(e){this.$_console_log("Scroll event",e),this.scrollHeight=e.target.scrollTop},resizeWindow:function(e){this.updateContainerHeight()},updateContainerHeight:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$nextTick((function(){var n=t.$refs.chatBodyContainer,i=t.$refs.chatTextfield;t.bodyContainerHeight=window.innerHeight-n.offsetTop-i.clientHeight-4,t.$_console_log("Containers",n,i,"Window Height",window.innerHeight,t.bodyContainerHeight),!0===e&&Array.isArray(t.conversation.messages)&&t.conversation.messages.length>0&&(t.$_console_log("Heights: ",t.bodyContainerHeight,t.chatWindow.scrollHeight),t.bodyContainerHeight>=t.chatWindow.scrollHeight?(t.$_console_log("Show watcher: No scrollbar exists. Reading all messages"),t.scrollToBottom()):(t.$_console_log("Show watcher: Message length is greater than 0. Scrolling to last read message"),t.scrollToLastReadMessage()))}));case 1:case"end":return n.stop()}}),n)})))()},onMessageReceived:function(e){var t=this;"object"===Object(Y["a"])(e)&&null!==e?this.conversation.id===e.conversationId&&this.$store.dispatch("addChatMessage",{conversationId:this.conversation.id,message:e}).then((function(){t.show&&(e.userId!==t.user.id&&t.chatWindow.clientHeight!==t.chatWindow.scrollHeight||t.scrollToBottom())})):this.$_console_log("OnMessageReceived: Null object returned")},onReadReceiptReceived:function(e){var t=this;this.$_console_log("Read receipt received: ",e),"object"===Object(Y["a"])(e)&&null!==e?this.conversation.id===e.message.conversationId&&this.$store.dispatch("addReadReceipt",{conversationId:this.conversation.id,receipt:e}).then((function(){t.$_console_log("Receipt successfully added to message. Show",t.show),t.show&&t.updateReadReceiptMarker()})):this.$_console_log("OnReadReceiptReceived: Null object returned")},goBack:function(){this.$emit("goBack",!0)},sendMessage:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.newMessage.id=0,e.newMessage.userId=e.user.id,e.newMessage.conversationId=e.conversation.id,t.next=5,an.sendMessage(e.newMessage);case 5:e.newMessage={text:""},e.$refs.newMessage.focus();case 7:case"end":return t.stop()}}),t)})))()},isOwner:function(e){return this.user.id===e.userId},getTextPosition:function(e){return e.userId===this.user.id?"text-right":"text-left"},deleteConversation:function(){var e=this;this.$store.dispatch("deleteConversation",this.conversation.id).then((function(){})).catch((function(){})).then((function(){return e.deleteConversationDialog=!1}))},updateTitle:function(){var e=this,t=this.newTitle;/^\s*$/.test(t)?this.editingTitle=!1:this.$store.dispatch("updateConversationTitle",{conversationId:this.conversation.id,title:t}).then((function(){})).catch((function(){})).then((function(){return e.editingTitle=!1}))},openMoreInfo:function(e){this.moreInfo.text=e.text,this.moreInfo.timestamp=e.timestamp,this.moreInfo.username=e.userId,this.moreInfoDialog=!0},deleteMessage:function(e){this.$store.dispatch("deleteChatMessage",{conversationId:this.conversation.id,messageId:e})},canDeleteMessage:function(e){return!(!this.isMessageDeletable||e.userId!==this.user.id)},scrollToBottom:function(){var e=this;this.$nextTick((function(){e.chatWindow.scrollTo(0,e.chatWindow.scrollHeight),e.readAllMessages()}))},scrollToLastReadMessage:function(){var e=this;if(this.show){var t=this.conversation.messages.find((function(t){return e.user.id!==t.userId&&(0===t.readReceipts.length||"undefined"!==typeof t.readReceipts.find((function(t){return t.userId!==e.user.id})))}));"undefined"!==typeof t?this.$nextTick((function(){for(var n=document.getElementsByClassName("bubble-id"),i=null,o=0,s=0;s<n.length;s++)if(o+=n[s].parentNode.offsetHeight,parseInt(n[s].innerText,10)===t.id){i=n[s];break}null!==i&&(e.chatWindow.scrollTo(0,o-e.chatWindow.offsetTop),e.$store.dispatch("highlightMessage",{messageId:t.id,conversationId:t.conversationId,on:!0}),setTimeout((function(){e.$store.dispatch("highlightMessage",{messageId:t.id,conversationId:t.conversationId,on:!1})}),3e3))})):(this.$_console_log("ScrollToLastReadMessage: All messages are read."),this.scrollToBottom())}},readAllMessages:function(){var e=this;if(Array.isArray(this.conversation.messages)){var t=this.conversation.messages.filter((function(t){return(!Array.isArray(t.readReceipts)||0===t.readReceipts.length)&&t.userId!==e.user.id}));Array.isArray(t)&&0!==t.length?(this.$_console_log(t),this.$store.dispatch("readChatMessageList",{conversationId:this.conversation.id,messageIds:t.map((function(e){return e.id}))})):this.$_console_log("ReadAllMessages: NewMessages is null or empty")}},setMessageHover:function(e,t){t?this.$store.dispatch("setMessageHover",{messageId:e.id,conversationId:e.conversationId,on:!0}):this.$store.dispatch("setMessageHover",{messageId:e.id,conversationId:e.conversationId,on:!1})},isLastReadMessage:function(e){return this.othersLastReadMessage>-1&&e.id===this.conversation.messages[this.othersLastReadMessage].id},updateReadReceiptMarker:function(){if(2===this.conversation.conversationUsers.length){var e,t=!1;for(e=this.othersLastReadMessage>-1?this.othersLastReadMessage:0,e;e<this.conversation.messages.length;e++)if(this.conversation.messages[e].userId===this.user.id){if(null!==this.conversation.messages[e].readReceipts&&0===this.conversation.messages[e].readReceipts.length)break;t=!0}if(!0===t){while(e>1)if(this.conversation.messages[--e].userId===this.user.id)break;this.othersLastReadMessage=e}}}}};var cn=ln,un=(n("cd52"),n("62ad")),dn=n("169a"),hn=n("0fd9"),fn=n("71d9"),pn=Object(x["a"])(cn,Ft,It,!1,null,null,null),mn=pn.exports;A()(pn,{VBtn:S["a"],VCard:ae["a"],VCardActions:ze["a"],VCardText:ze["b"],VCardTitle:ze["c"],VCol:un["a"],VDialog:dn["a"],VFlex:He["a"],VIcon:ce["a"],VLayout:qe["a"],VRow:hn["a"],VSpacer:ve["a"],VTextField:N["a"],VToolbar:fn["a"],VToolbarTitle:ge["b"]});var vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.conversation.unreadMessages>0?n("v-badge",{attrs:{content:e.conversation.unreadMessages}},[n("chat-avatar",{attrs:{conversation:e.conversation}})],1):n("chat-avatar",{attrs:{conversation:e.conversation}})],1)},gn=[],bn={data:function(){return{}},components:{"chat-avatar":Jt},props:{conversation:{type:Object,required:!0}}},xn=bn,yn=Object(x["a"])(xn,vn,gn,!1,null,null,null),wn=yn.exports;A()(yn,{VBadge:re["a"]});var _n={data:function(){return{selectedConversation:null,newConversation:{users:[]},search:null,isLoading:!1,currentTime:0,hideMobile:!1}},components:{"chat-conversation":mn,"chat-badge":wn},mounted:function(){this.countTime()},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({user:function(e){return e.auth.user},userList:function(e){return e.auth.otherUsers},conversations:function(e){return e.chat.conversations}})),{},{isMobile:function(){return this.$vuetify.breakpoint.mobile}}),watch:{selectedConversation:{handler:function(e,t){this.$_console_log("SelectedConversation",e),this.hideMobile=null!==e},deep:!0}},methods:{countTime:function(){var e=this;this.currentTime=Math.trunc((new Date).getTime()/1e3),setTimeout((function(){e.countTime()}),1e3)},closeConversation:function(){this.selectedConversation=null},getAllConversations:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("getAllConversationsForUser").then((function(t){var n=e.conversation.messages.filter((function(t){return(!Array.isArray(t.readReceipts)||0===t.readReceipts.length)&&t.userId!==e.user.id}));Array.isArray(n)&&0!==n.length||e.$_console_log("ReadAllMessages: NewMessages is null or empty")}));case 1:case"end":return t.stop()}}),t)})))()},startConversation:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch("startNewConversation",e.newConversation).then((function(){})).catch((function(){})).then((function(){return e.newConversation.users=[]}));case 1:case"end":return t.stop()}}),t)})))()},shouldShowConversation:function(e){return"object"===Object(Y["a"])(e)&&null!==e&&"object"===Object(Y["a"])(this.selectedConversation)&&null!==this.selectedConversation&&e.id===this.selectedConversation.id}}},kn=_n,Ln=n("c6a6"),$n=Object(x["a"])(kn,Bt,St,!1,null,null,null),jn=$n.exports;A()($n,{VAutocomplete:Ln["a"],VBtn:S["a"],VCol:un["a"],VContainer:F["a"],VList:de["a"],VListItem:he["a"],VListItemContent:fe["a"],VListItemIcon:Dt["a"],VRow:hn["a"]});var On=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("file-explorer",{attrs:{parentView:"browser",goFile:e.goFile},on:{loadFile:e.loadFile}}),n("file-viewer",{attrs:{open:e.dialogOpen},on:{"viewer-off":function(t){e.dialogOpen=!1},"file-back":function(t){return e.browserGo(-1)},"file-forward":function(t){return e.browserGo(1)}}},[e.type===e.mediaTypes.video?[n("p",{attrs:{slot:"header"},slot:"header"},[e._v("Video Player")]),n("video-player",{attrs:{url:e.path,on:e.on},on:{"player-off":function(t){e.on=!1}}})]:e.type===e.mediaTypes.image?[n("p",{attrs:{slot:"header"},slot:"header"},[e._v("Image Viewer")]),n("image-viewer",{attrs:{url:e.path}})]:e.type===e.mediaTypes.text?[n("p",{attrs:{slot:"header"},slot:"header"},[e._v("Text Viewer")]),n("text-viewer",{attrs:{url:e.path,on:e.on},on:{"text-off":function(t){e.on=!1}}})]:e._e()],2)],1)},Cn=[],Tn=(n("caad"),n("2532"),"api/directory/folder"),Dn="api/directory/list",Mn="api/directory/download/file",An="api/directory/delete",Bn="api/directory/upload",Sn={loadDirectory:function(e,t){return"undefined"===typeof t||null===t||""===t||!1===t?tt.get("".concat(Tn,"/").concat(e)):tt.get("".concat(Tn,"/").concat(e,"/").concat(t))},getFile:function(e){return tt.get("".concat(Mn,"/").concat(e),{params:{token:j.state.auth.accessToken}})},getFolderList:function(){return tt.get(Dn)},deleteFile:function(e,t,n){return tt.request({url:An,method:"POST",data:{Name:e,Directory:t,SubDirectory:n}})},uploadFile:function(e){return tt.request({url:Bn,method:"POST",data:e,headers:{"Content-Type":!1,"Process-Data":!1},timeout:6e4})}},Fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-overlay",{directives:[{name:"show",rawName:"v-show",value:e.loadingContents,expression:"loadingContents"}],attrs:{absolute:"",opacity:"0.50","z-index":"9999"}},[n("v-progress-circular",{staticClass:"browser-loading-circle",attrs:{size:200,width:16,color:"primary",indeterminate:""}})],1),!0===e.features.upload?n("file-upload"):e._e(),n("v-container",[e.selectable?n("v-form",[n("v-layout",{attrs:{row:"",wrap:"","px-2":""}},[n("v-flex",{attrs:{xs12:""}},[n("v-select",{attrs:{items:e.folders,label:"Select a folder","item-text":"name","item-value":"name"},model:{value:e.selectedDirectory,callback:function(t){e.selectedDirectory=t},expression:"selectedDirectory"}})],1)],1)],1):e._e(),n("v-card",[n("v-container",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs1:""}},[e.canGoBack?n("v-btn",{attrs:{icon:""},on:{click:e.goBack}},[n("fa-icon",{attrs:{icon:"arrow-left","ma-2":"","pa-2":""}})],1):e._e()],1),n("v-flex",{attrs:{xs11:""}},[e._v(" "+e._s(e.fullPath)+" ")])],1)],1)],1),e._l(e.contents,(function(t){return n("v-list-item",{key:t.id},[n("v-list-item-action",[n("a",{attrs:{href:e.getDownloadPath(t),download:""}},[n("fa-icon",{attrs:{icon:"download"}})],1)]),n("v-list-item-avatar",[n("fa-icon",{staticStyle:{color:"gray"},attrs:{icon:e.getIcon(t),size:"2x"}})],1),n("v-list-item-content",{class:{"hide-extra":!!e.$vuetify.breakpoint.xsOnly},on:{click:function(n){return e.open(t)}}},[n("tooltip",{attrs:{value:t.title}})],1),t.size>0?n("v-list-item-action",{staticClass:"hidden-xs-only"},[e._v(" "+e._s(e.getFileSize(t.size))+" ")]):e._e(),e.features.delete?n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.deleteItem(t)}}},[n("fa-icon",{attrs:{size:"lg",icon:"window-close"}})],1)],1):e._e()],1)})),n("v-layout",{staticClass:"loading-container",attrs:{row:"","justify-center":""}},[n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{indeterminate:"",color:"purple",width:12,size:120}})],1)],2)],1)},In=[],Nn=(n("b680"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{bottom:"",color:"grey lighten-3","open-delay":"400"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("span",e._g({},i),[e._v(e._s(e.value))])]}}])},[n("v-flex",{staticClass:"tooltip"},[e._t("default",[e._v(e._s(e.value))])],2)],1)}),Rn=[],Vn={data:function(){return{}},props:{value:{type:String,required:!0}}},En=Vn,Wn=(n("1702"),n("3a2f")),Un=Object(x["a"])(En,Nn,Rn,!1,null,null,null),Pn=Un.exports;A()(Un,{VFlex:He["a"],VTooltip:Wn["a"]});var zn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",{directives:[{name:"show",rawName:"v-show",value:e.uploadFiles.length>0,expression:"uploadFiles.length > 0"}],attrs:{"grid-list-xl":""}},[n("div",{staticClass:"text-xs-center"},[e._v("Files being uploaded...")]),n("v-list",[e._l(e.uploadFiles,(function(t,i){return[n("v-list-item",[n("v-list-item-content",[e._v(" "+e._s(t.name)+" ")])],1)]}))],2)],1),n("v-container",{staticClass:"upload-area",attrs:{"mt-1":""}},[n("v-form",{attrs:{enctype:"multipart/form-data"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("label",{staticClass:"upload-button",attrs:{id:"upload-button",for:"upload-files"}},[e._v("UPLOAD FILES")])]),n("input",{ref:"fUpload",staticClass:"file-upload",attrs:{type:"file",name:"upload-files",id:"upload-files",multiple:"",hidden:""},on:{change:e.setFiles}})],1)],1)],1)],1)},Hn=[],qn=function(e){var t="";if(!Array.isArray(e))return t;for(var n=0;n<e.length;n++)t+=e[n],e.length-1!==n&&(t+="/");return t},Gn={data:function(){return{uploadFiles:[]}},computed:Object(K["a"])({},Object($["b"])({directory:function(e){return e.fileExplorer.directory},subDirectories:function(e){return e.fileExplorer.subDirectories}})),methods:{setFiles:function(e){this.$_console_log(e.target.files);for(var t=0;t<e.target.files.length;t++)this.uploadFiles.push(e.target.files[t]);this.uploadMultipleFiles()},uploadMultipleFiles:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.uploadFiles.length)){t.next=8;break}return e.$_console_log(e.uploadFiles[n].name),t.next=5,e.sendFile(e.uploadFiles[n]).then((function(t){e.$_console_log("File sent!")})).catch((function(){e.$_console_log("Failed to upload file")}));case 5:n++,t.next=1;break;case 8:e.uploadFiles=[],e.$refs.fUpload.value="",e.$_console_log("Finished sending all files");case 11:case"end":return t.stop()}}),t)})))()},sendFile:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=new FormData,i.append("File",e),i.append("Name",e.name),i.append("Directory",t.directory),o=qn(t.subDirectories),t.$_console_log("SubDirs: ",o),""!==o&&i.append("SubDirectory",o),n.next=9,Sn.uploadFile(i).then((function(n){t.$_console_log("Successfully uploaded file"),t.$store.dispatch("addFile",n.data),t.$store.dispatch("pushNotification",{text:"Successfully uploaded file ".concat(e.name),type:0})})).catch((function(){t.$_console_log("Error uploading files"),t.$store.dispatch("pushNotification",{text:"Failed uploading file ".concat(e.name),type:2})}));case 9:case"end":return n.stop()}}),n)})))()}}},Jn=Gn,Yn=(n("5787"),Object(x["a"])(Jn,zn,Hn,!1,null,"05dd7626",null)),Kn=Yn.exports;A()(Yn,{VContainer:F["a"],VFlex:He["a"],VForm:I["a"],VLayout:qe["a"],VList:de["a"],VListItem:he["a"],VListItemContent:fe["a"]});var Qn="https://localhost:7757",Xn={data:function(){return{selectedDirectory:"",loading:!1,changing:!1,features:{upload:!1,delete:!1,viewing:!1}}},mixins:[C],components:{tooltip:Pn,"file-upload":Kn},props:{selectable:{type:Boolean,default:!0},parentView:{type:String,required:!0},goFile:{type:Object,default:function(){}}},created:function(){this.setActiveFeatures()},mounted:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Array.isArray(e.folders)&&(!Array.isArray(e.folders)||0!==e.folders.length)){t.next=3;break}return t.next=3,e.$store.dispatch("getFolders");case 3:e.getDirectoryFromRoute();case 4:case"end":return t.stop()}}),t)})))()},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({contents:function(e){return e.fileExplorer.contents},folders:function(e){return e.fileExplorer.folders},directory:function(e){return e.fileExplorer.directory},subDirectories:function(e){return e.fileExplorer.subDirectories},loadingContents:function(e){return e.fileExplorer.loadingContents},activeModules:function(e){return e.auth.activeModules}})),{},{fullPath:function(){return"undefined"!==typeof this.directory&&null!==this.directory?Array.isArray(this.subDirectories)&&this.subDirectories.length>0?"".concat(this.directory,"/").concat(qn(this.subDirectories)):this.directory:""},canGoBack:function(){return"undefined"!==typeof this.$route.params.folder&&this.$route.params.folder!==this.selectedDirectory}}),watch:{selectedDirectory:function(e){this.changing||(this.$_console_log("[FileExplorer] Watcher - Selected directory: ",e),this.$router.push({name:"browser-folder",params:{folder:e}}))},goFile:{handler:function(e){if("object"!==Object(Y["a"])(e)||null===e)return this.$_console_log("[FileExplorer] goFile watcher: value is not an object or null"),void(this.goFile={file:null,num:0});if(0!==e.num){var t=this.contents.filter((function(e){return!1===e.isFolder})).slice(0);if(this.$_console_log("Folderless List:",t),0!==t.length){var n=t.findIndex((function(t){return encodeURI(t.title)===e.file}));if(-1!==n)if(n+e.num>=t.length)this.$_console_log("[FileExplorer] goFile watcher: Navigating here will overflow the list.");else if(n+e.num<0)this.$_console_log("[FileExplorer] goFile watcher: Navigating here will underflow the list.");else{var i=t[n+e.num];this.open(i)}else this.$_console_log("[FileExplorer] goFile watcher: File not found in list")}else this.$_console_log("[FileExplorer] goFile watcher: This folder only contains other folders. Nothing to load.")}else this.$_console_log("[FileExplorer] goFile watcher: Num is 0, therefore we aren\t navigating to a new file")},deep:!0}},methods:{setActiveFeatures:function(){var e=this.activeModules.find((function(e){return"browser"===e.id}));"undefined"!==typeof e&&Array.isArray(e.userModuleFeatures)&&(e.userModuleFeatures.some((function(e){return"browser-upload"===e.moduleFeatureId}))&&(this.features.upload=!0),e.userModuleFeatures.some((function(e){return"browser-delete"===e.moduleFeatureId}))&&(this.features.delete=!0),e.userModuleFeatures.some((function(e){return"browser-viewer"===e.moduleFeatureId}))&&(this.features.viewing=!0))},getDirectoryFromRoute:function(){var e=this;this.changing=!0,setTimeout((function(){if("undefined"!==typeof e.$route.params.folder)e.$_console_log("[file-explorer] getDirectoryFromRoute: Params.folder is not null, getting base path from url",e.$route.params.folder),e.$route.params.folder.includes("/")?e.selectedDirectory=e.$route.params.folder.substring(0,e.$route.params.folder.indexOf("/")):e.selectedDirectory=e.$route.params.folder;else{var t=e.folders.find((function(e){return!0===e.default}));"undefined"!==typeof t&&(e.selectedDirectory=t.name,e.$router.push({name:"browser-folder",params:{folder:e.selectedDirectory}}))}setTimeout((function(){e.changing=!1}),5)}),25)},open:function(e){var t=this;if(e.isFolder){var n="";if("undefined"===this.$route.params.folder)return void this.$_console_log("[file-explorer] open: Params.folder is null");n=this.$route.params.folder+"/"+e.title,this.$router.push({name:"browser-folder",params:{folder:n}})}else this.features.viewing&&(this.$_console_log("[FILE EXPLORER] Open Item: item, dl path",e,this.getFilePath(e)),setTimeout((function(){t.$emit("loadFile",t.getFilePath(e))}),125))},goBack:function(){var e="";if("undefined"!==this.$route.params.folder){var t=this.$route.params.folder.lastIndexOf("/");-1!==t?(e=this.$route.params.folder.substring(0,t),this.$router.push({name:"browser-folder",params:{folder:e}})):this.$_console_log("[file-explorer] goBack: Params.folder has no / in it. Can't go back from base path")}else this.$_console_log("[file-explorer] goBack: Params.folder is null")},getDownloadPath:function(e){return"".concat(Qn,"/api/directory/download/file/").concat(encodeURI(this.fullPath),"/").concat(encodeURIComponent(e.title),"?token=").concat(this.$store.state.auth.accessToken)},getFilePath:function(e){return"".concat(encodeURI(this.fullPath),"/").concat(encodeURIComponent(e.title))},getIcon:function(e){return e.isFolder?"folder":"file"},getFileSize:function(e){var t=0;while(e/1024>1)e/=1024,t++;return"".concat(e.toFixed(2)," ").concat(this.getType(t))},getType:function(e){switch(e){case 0:return"B";case 1:return"KB";case 2:return"MB";case 3:return"GB";case 4:return"TB"}},deleteItem:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!1!==t.deleteEnabled){n.next=2;break}return n.abrupt("return",t.$_console_log("You must have the appropriate permission to delete"));case 2:if("undefined"!==typeof e&&null!==e&&""!==e){n.next=4;break}return n.abrupt("return",t.$_console_log("Invalid file info, can't delete"));case 4:return t.$_console_log("Delete: ".concat(e.title)),n.next=7,Sn.deleteFile(e.title,t.directory,qn(t.subDirectories)).then((function(n){t.$_console_log("Successfully deleted the file"),t.$store.dispatch("deleteFile",e.title)})).catch((function(){return t.$_console_log("Error deleting the item in upload")}));case 7:case"end":return n.stop()}}),n)})))()}}},Zn=Xn,ei=(n("8ec8"),n("1800")),ti=n("8270"),ni=n("a797"),ii=n("490a"),oi=Object(x["a"])(Zn,Fn,In,!1,null,null,null),si=oi.exports;A()(oi,{VBtn:S["a"],VCard:ae["a"],VContainer:F["a"],VFlex:He["a"],VForm:I["a"],VLayout:qe["a"],VListItem:he["a"],VListItemAction:ei["a"],VListItemAvatar:ti["a"],VListItemContent:fe["a"],VOverlay:ni["a"],VProgressCircular:ii["a"],VSelect:z["a"]});var ri=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":e.getMaxWidth,fullscreen:e.isMobile},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-toolbar",[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("fa-icon",{attrs:{icon:"window-close"}})],1),n("v-toolbar-title",{staticClass:"headline pl-2"},[e._t("header",[e._v(" File Viewer ")])],2)],1),n("v-card",[n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs1:""}},[n("v-btn",{staticClass:"chevron-center",attrs:{icon:""},on:{click:function(t){return e.goBack()}}},[n("fa-icon",{attrs:{icon:"chevron-left",size:"3x"}})],1)],1),n("v-flex",{attrs:{xs10:""}},[e._t("default",[e._v(" File Viewer contents ")])],2),n("v-flex",{attrs:{xs1:""}},[n("v-btn",{staticClass:"chevron-center",attrs:{icon:""},on:{click:function(t){return e.goForward()}}},[n("fa-icon",{attrs:{icon:"chevron-right",size:"3x"}})],1)],1)],1)],1)],1)],1)},ai=[];window.mobilecheck=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e};var li={name:"file-viewer",data:function(){return{windowHeight:window.innerHeight,windowWidth:window.innerWidth,dialog:!1}},props:{open:{type:Boolean,required:!0}},computed:{getMaxWidth:function(){var e=window.mobilecheck();return e?320:this.windowWidth>=1904?1785:this.windowWidth>=1600?1400:this.windowWidth>=1264?1185:this.windowWidth>=960?900:.95*this.windowWidth},isMobile:function(){return this.getMaxWidth<960}},watch:{dialog:function(e){!1===e&&this.$emit("viewer-off",!0)},open:function(e){this.dialog=e}},mounted:function(){window.addEventListener("resize",this.getWindowSize),window.addEventListener("keyup",this.keypressNavigation)},beforeDestroy:function(){window.removeEventListener("resize",this.getWindowSize),window.removeEventListener("keyup",this.keypressNavigation)},methods:{getWindowSize:function(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth},keypressNavigation:function(e){37===e.keyCode?this.goBack():39===e.keyCode&&this.goForward()},goBack:function(){this.$_console_log("[File Viewer] Go Back"),this.$emit("file-back")},goForward:function(){this.$_console_log("[File Viewer] Go Forward"),this.$emit("file-forward")}}},ci=li,ui=(n("e29a"),Object(x["a"])(ci,ri,ai,!1,null,null,null)),di=ui.exports;A()(ui,{VBtn:S["a"],VCard:ae["a"],VCardText:ze["b"],VDialog:dn["a"],VFlex:He["a"],VLayout:qe["a"],VToolbar:fn["a"],VToolbarTitle:ge["b"]});var hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-container center"},[n("video",{ref:"player",staticClass:"video-player",attrs:{id:"video-player",preload:"none",width:"420",controls:""}},[n("source",{attrs:{src:e.path}})])])},fi=[],pi={name:"video-player",data:function(){return{player:null,path:null}},props:{url:{type:String,required:!0},on:{type:Boolean,required:!0}},mounted:function(){this.player=document.getElementById("video-player")},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({accessToken:function(e){return e.auth.accessToken}})),{},{type:function(){if("undefined"===typeof this.url||""===this.url)return this.$_console_log("[VIDEO PLAYER] type: Undefined or empty"),"";if(!this.url.includes("."))return this.$_console_log("[VIDEO PLAYER] type: Doesn't include a period (.) "),"";var e=this.url.lastIndexOf("."),t=this.url.slice(e).toLowerCase();switch(t){case".mkv":case".avi":case".mpeg":case".mpg":case".mp4":case".wmv":return"video/mp4";case".webm":return"video/webm";case".mp3":return"audio/mpeg";default:return""}}}),watch:{on:function(e){this.pausePlayer(),!0===e&&this.loadPlayer()},url:function(e){this.$_console_log("[Video Player] Url watcher: url value",e),this.pausePlayer(),"undefined"!==typeof e&&null!==e&&""!==e?this.loadPlayer():this.$_console_log("[Video Player] Empty url string")}},methods:{loadPlayer:function(){this.path="".concat("https://localhost:7757","/api/serve-file/").concat(this.url,"?token=").concat(this.accessToken);var e=this;setTimeout((function(){e.player.load(),e.player.canPlayType(e.type)?e.player.play():e.$_console_log("[Video Player] Load Player: Can't play type")}),25)},pausePlayer:function(){this.player.pause()}}},mi=pi,vi=(n("8bdb"),Object(x["a"])(mi,hi,fi,!1,null,"2c58ae1f",null)),gi=vi.exports,bi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",[e._l(e.lines,(function(t){return[n("v-row",e._l(t,(function(t){return n("span",[" "===t?void 0:e._e(),"\t"===t?void 0:e._e(),"\r"===t?void 0:[e._v(" "+e._s(t)+" ")]],2)})),0)]}))],2)],1)},xi=[],yi={name:"text-viewer",data:function(){return{text:null,lines:[]}},props:{url:{type:String,required:!0},on:{type:Boolean,required:!0}},watch:{on:function(e){!0===e&&(this.lines=[],this.getData())},url:function(e){this.$_console_log("[Text Viewer] Url watcher: url value",e),this.getData()}},methods:{getData:function(){var e=this;if("undefined"!==typeof this.url&&null!==this.url&&""!==this.url){var t=this.url;jt.request((function(){return Sn.getFile(t).then((function(t){e.$_console_log("File data:",t.data);var n=t.data;e.lines=[];for(var i="",o=0;o<n.length;o++)"\n"===n[o]?(e.lines.push(i),i=""):i+=n[o];e.lines.push(i)})).catch((function(){e.$_console_log("[Text Viewer] Get Data: Failed to get data from ".concat(t))}))}))}else this.$_console_log("[Text Viewer] Get Data: url value is null or empty")}}},wi=yi,_i=Object(x["a"])(wi,bi,xi,!1,null,null,null),ki=_i.exports;A()(_i,{VContainer:F["a"],VRow:hn["a"]});var Li=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-img",{attrs:{src:e.getPath,"max-width":e.getMaxWidth,"max-height":e.getMaxHeight,contain:""}})},$i=[],ji={name:"text-viewer",data:function(){return{windowHeight:window.innerHeight,windowWidth:window.innerWidth,basepath:"https://localhost:7757"}},props:{url:{type:String,required:!0}},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({accessToken:function(e){return e.auth.accessToken}})),{},{getMaxWidth:function(){return.8*this.windowWidth},getMaxHeight:function(){return.66*this.windowHeight},getPath:function(){return"".concat(this.basepath,"/api/directory/download/file/").concat(this.url,"?token=").concat(this.accessToken)}}),watch:{url:function(e){this.$_console_log("[Image Viewer] Url watcher: url value",e)}},mounted:function(){window.addEventListener("resize",this.getWindowSize)},beforeDestroy:function(){window.removeEventListener("resize",this.getWindowSize)},methods:{getWindowSize:function(){this.windowHeight=window.innerHeight,this.windowWidth=window.innerWidth}}},Oi=ji,Ci=Object(x["a"])(Oi,Li,$i,!1,null,null,null),Ti=Ci.exports;A()(Ci,{VImg:ue["a"]});var Di={data:function(){return{level:0,folders:[],type:null,path:null,on:!1,dialogOpen:!1,mediaTypes:{video:"video",image:"image",text:"text"},goFile:{file:null,num:0}}},components:{"file-explorer":si,"file-viewer":di,"video-player":gi,"text-viewer":ki,"image-viewer":Ti},beforeRouteEnter:function(e,t,n){return Object(L["a"])(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Mi(e,t,n);case 2:o=i.sent,o?n():(j.dispatch("pushNotification",{text:"Failed to change route to this location (".concat(e.fullPath,"). It must not exist."),type:2,group:{type:"browser",value:"pathFail"}}),gs.push({name:"browser"}));case 4:case"end":return i.stop()}}),i)})))()},beforeRouteUpdate:function(e,t,n){return Object(L["a"])(regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Mi(e,t,n);case 2:o=i.sent,o?n():(j.dispatch("pushNotification",{text:"Failed to change route to this location (".concat(e.fullPath,"). It must not exist."),type:2,group:{type:"browser",value:"pathFail"}}),gs.push({name:"browser"}));case 4:case"end":return i.stop()}}),i)})))()},beforeRouteLeave:function(e,t,n){"browser-folder"!==e.name&&j.dispatch("clearFileExplorer"),n()},created:function(){var e=this.$store.state.auth.role;e===f.Name.Admin?this.level=f.Level.Admin:e===f.Name.Elevated?this.level=f.Level.Elevated:e===f.Name.General?this.level=f.Level.General:this.$router.push({name:"start"})},watch:{dialogOpen:function(e){if(!1===e)if(this.on)this.on=!1;else{var t=this;this.on=!0,setTimeout((function(){t.on=!1}),50)}}},methods:{getType:function(e){if("undefined"===typeof e||""===e)return this.$_console_log("[File Viewer] getType: Undefined or empty"),this.mediaTypes.text;if(!e.includes("."))return this.$_console_log("[File Viewer] getType: Doesn't include a period (.) "),this.mediaTypes.text;var t=e.lastIndexOf("."),n=e.slice(t).toLowerCase();switch(n){case".mkv":case".avi":case".mpeg":case".mpg":case".mp4":case".wmv":case".webm":case".mp3":return this.mediaTypes.video;case".jpg":case".jpeg":case".gif":case".tiff":case".bmp":case".png":case".img":return this.mediaTypes.image;default:return this.mediaTypes.text}},loadFile:function(e){var t=this;this.$_console_log("[BROWSER] LoadFile: ",e),this.type=this.getType(e),this.path=e,this.dialogOpen=!0,setTimeout((function(){t.on=!0}),15)},browserGo:function(e){var t;"number"===typeof e&&0!==e?"string"===typeof this.path?(this.path.includes("/")?this.path.lastIndexOf("/")===this.path.length-1?(t=this.path.substring(0,this.path.lastIndexOf("/")),t.includes("/")&&(t=t.lastIndexOf("/")===t.length-1?t.substring(0,t.lastIndexOf("/")):t.substring(t.lastIndexOf("/")+1))):t=this.path.substring(this.path.lastIndexOf("/")+1):t=this.path,this.goFile={file:t,num:e}):this.$_console_log("[Browser] Browser Go: Path is not a string"):this.$_console_log("[Browser] Browser Go: Number is not a number or 0")}}};function Mi(e,t,n){return Ai.apply(this,arguments)}function Ai(){return Ai=Object(L["a"])(regeneratorRuntime.mark((function e(t,n,i){var o,s,r,a,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return O.methods.$_console_log("Route changed. To, from:",t,n),o=!1,s=!1,r=null,a=null,l=null,c=null,"undefined"!==typeof t.params.folder&&(t.params.folder.includes("/")?(o=!0,u=t.params.folder.indexOf("/"),r=t.params.folder.substring(0,u),l=t.params.folder.substring(u+1)):r=t.params.folder),"undefined"!==typeof n.params.folder&&(n.params.folder.includes("/")?(s=!0,d=t.params.folder.indexOf("/"),a=n.params.folder.substring(0,d),c=n.params.folder.substring(d+1)):a=n.params.folder),O.methods.$_console_log("Route change info: ",o,r,l,s,a,c),t.params.folder===n.params.folder?O.methods.$_console_log("Staying in the same folder"):a!==r&&!1===o?j.dispatch("changeDirectory",r):null!==r&&o&&j.dispatch("goDirectory",{directory:r,subDirs:l}),e.prev=11,e.next=14,j.dispatch("loadDirectory");case 14:e.next=38;break;case 16:if(e.prev=16,e.t0=e["catch"](11),!(e.t0.status>=400)){e.next=38;break}if(null===c){e.next=26;break}return e.next=22,j.dispatch("goDirectory",{directory:a,subDirs:c});case 22:return e.next=24,j.dispatch("loadDirectory");case 24:e.next=38;break;case 26:if(null===a){e.next=33;break}return e.next=29,j.dispatch("goDirectory",{directory:a,subDirs:null});case 29:return e.next=31,j.dispatch("loadDirectory");case 31:e.next=38;break;case 33:return e.next=35,j.dispatch("clearFileExplorer");case 35:return e.next=37,j.dispatch("loadDirectory");case 37:return e.abrupt("return",!1);case 38:return e.abrupt("return",!0);case 39:case"end":return e.stop()}}),e,null,[[11,16]])}))),Ai.apply(this,arguments)}var Bi=Di,Si=Object(x["a"])(Bi,On,Cn,!1,null,null,null),Fi=Si.exports,Ii=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("h3",[e._v("List of notes:")]),n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.noteList,(function(t){return n("div",{key:t.id},[n("note-editor",{attrs:{obj:t},on:{delete:e.deleteOld,create:e.updateNote,updateObj:e.modifyOld}})],1)})),0),n("v-layout",{staticClass:"note-container",attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[e._v(" Create new note: "),n("v-btn",{attrs:{icon:""},on:{click:e.create}},[n("fa-icon",{attrs:{icon:"plus"}})],1)],1),n("v-flex",e._l(e.newNotes,(function(t,i){return n("div",{key:t.id},[n("note-editor",{attrs:{obj:t},on:{delete:e.deleteNew,create:e.addNew,updateObj:e.modifyNew}})],1)})),0)],1)],1)},Ni=[],Ri="api/note/getall",Vi="api/note/get",Ei="api/note/create",Wi="api/note/update",Ui="api/note/delete",Pi={getAllNotes:function(){return Object(L["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",tt.get(Ri));case 1:case"end":return e.stop()}}),e)})))()},getNotes:function(){return tt.get(Vi)},deleteNote:function(e){return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",tt.request({url:Ui,method:"delete",params:{id:e}}));case 1:case"end":return t.stop()}}),t)})))()},createNote:function(e){return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",tt.post(Ei,e));case 1:case"end":return t.stop()}}),t)})))()},updateNote:function(e){return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",tt.request({url:Wi,method:"put",data:e,headers:{"Content-Type":"application/json"}}));case 1:case"end":return t.stop()}}),t)})))()}},zi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"note-container"},[n("div",{staticClass:"note-card"},[n("div",{staticClass:"nav-bar"},[n("div",{staticClass:"nav-header left close",on:{click:e.deleteNote}},[n("div",{staticClass:"nav-bar-item left"},[e._v("X")])]),n("div",{staticClass:"nav-header center"},[n("div",{ref:"title",staticClass:"textarea title",attrs:{contenteditable:"true"}})]),n("div",{staticClass:"nav-header right create",on:{click:e.createNote}},[n("div",{staticClass:"nav-bar-item right"},[e._v("SAVE")])])]),n("div",{staticClass:"note-inner-container"},[n("div",{ref:"note",staticClass:"textarea main",attrs:{contenteditable:"true"}}),n("div",{ref:"footer",staticClass:"nav-footer"})])])])},Hi=[],qi={data:function(){return{note:{id:0,priority:0,type:0,color:"yellow",text:"",title:"",updated:""},menu:{text_styling:[1,2,3]}}},props:{obj:{type:Object,required:!0}},computed:{},watch:{"obj.updated":function(){this.note.updated=this.obj.updated,this.$refs.footer.innerText=this.getTime(this.obj.updated)}},created:function(){this.obj&&(this.note=Object.assign({},this.obj))},mounted:function(){if(this.$refs.note.innerText=this.obj.text,this.$refs.title.innerText=this.obj.title,""!==this.obj.updated){var e=this.getTime(this.obj.updated);"Invalid date"!==e&&(this.$refs.footer.innerText=e)}this.$refs.note.addEventListener("keyup",this.updateText,!1),this.$refs.title.addEventListener("keyup",this.updateTitle,!1)},beforeDestroy:function(){this.$refs.note.removeEventListener("keyup",this.updateText,!1),this.$refs.title.removeEventListener("keyup",this.updateTitle,!1)},methods:{updateText:function(){var e=this;setTimeout((function(){e.$_console_log("Text: "+e.$refs.note.innerText),e.note.text=e.$refs.note.innerText,e.$emit("updateObj",e.note)}),1)},updateTitle:function(){var e=this;setTimeout((function(){e.$_console_log("Title: "+e.$refs.title.innerText),e.note.title=e.$refs.title.innerText,e.$emit("updateObj",e.note)}),1)},deleteNote:function(){this.$emit("delete",this.note)},createNote:function(){this.$emit("create",this.note)},getTime:function(e){return this.$moment(new Date(e)).format("lll")}}},Gi=qi,Ji=(n("bbb5"),Object(x["a"])(Gi,zi,Hi,!1,null,"2a596b5e",null)),Yi=Ji.exports;function Ki(e){return{priority:0,color:"",id:e,text:"",type:0,title:"",user:""}}var Qi={data:function(){return{activeNote:{priority:0,color:"",created:"",id:0,text:"",type:0,updated:"",user:""},newNotes:[],noteList:[],idCount:-1}},components:{"note-editor":Yi},created:function(){this.newNotes.push(Ki(this.idCount--)),this.getData()},methods:{getData:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$_console_log("[Notes] Get notes"),jt.request((function(){Pi.getNotes().then((function(t){e.$_console_log("[notes] success getting notes",t),""!==t.data&&(e.noteList=t.data)})).catch((function(){return e.$_console_log("[notes] error getting notes")}))}));case 2:case"end":return t.stop()}}),t)})))()},create:function(){this.newNotes.push(Ki(this.idCount--))},deleteOld:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:jt.request((function(){Pi.deleteNote(e.id).then((function(n){t.$_console_log("[Notes] Succesfully deleted note.");var i=t.noteList.findIndex((function(t){return t.id===e.id}));i<0?t.$_console_log("[Notes] Note doesn't exist in the list"):t.noteList.splice(i,1)})).catch((function(){t.$_console_log("[Notes] Failed to delete existing note")}))}));case 1:case"end":return n.stop()}}),n)})))()},deleteNew:function(e){var t=this.newNotes.findIndex((function(t){return t.id===e.id}));this.newNotes.splice(t,1)},addNew:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$_console_log("[Notes] Create note"),t.$_console_log(e),""===e.text?t.$_console_log("[Notes] Note is empty, not going to create it"):jt.request((function(){Pi.createNote(e).then((function(e){t.$_console_log("[Notes] Success creating note"),t.noteList.push(e.data),1===t.newNotes.length?t.newNotes=[]:t.newNotes.splice(index,1),Object(ee["setTimeout"])((function(){0===t.newNotes.length&&t.newNotes.push(Ki(t.idCount--))}),10)})).catch((function(){return t.$_console_log("[Notes] Error creating note")}))}));case 3:case"end":return n.stop()}}),n)})))()},modifyNew:function(e){var t=this.newNotes.findIndex((function(t){return t.id===e.id}));this.newNotes[t].text=e.text,this.newNotes[t].title=e.title},modifyOld:function(e){var t=this.noteList.findIndex((function(t){return t.id===e.id}));this.noteList[t].text=e.text,this.noteList[t].title=e.title},updateNote:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$_console_log("[Notes] Update note"),t.$_console_log(e),jt.request((function(){Pi.updateNote(e).then((function(n){t.$_console_log("[Notes] Success updating note");var i=t.noteList.findIndex((function(t){return t.id===e.id}));t.noteList[i].updated=n.data.updated})).catch((function(){return t.$_console_log("[Notes] Error creating note")}))}));case 3:case"end":return n.stop()}}),n)})))()}}},Xi=Qi,Zi=Object(x["a"])(Xi,Ii,Ni,!1,null,null,null),eo=Zi.exports;A()(Zi,{VBtn:S["a"],VContainer:F["a"],VFlex:He["a"],VLayout:qe["a"]});var to=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-layout",{attrs:{row:""}},[n("v-flex",{staticClass:"left-menu",attrs:{xs4:"",sm3:"",md2:"",lg1:""}},[n("v-layout",{attrs:{column:""}},[e._l(e.obj,(function(t,i){return[n("router-link",{attrs:{to:{name:"documentation-item",params:{id:t}}}},[e._v(e._s(t))])]}))],2)],1),n("v-flex",{attrs:{xs8:"",sm9:"",md10:"",lg11:""}},[n("router-view")],1)],1)],1)},no=[],io=n("7967"),oo=JSON.parse(JSON.stringify(io)),so={data:function(){return{obj:[]}},created:function(){this.obj=oo.map((function(e){return e.id})).slice(0)}},ro=so,ao=(n("326c"),Object(x["a"])(ro,to,no,!1,null,null,null)),lo=ao.exports;A()(ao,{VFlex:He["a"],VLayout:qe["a"]});var co=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.obj.title))]),n("h3",[e._v(e._s(e.obj.topic))]),e._l(e.obj.sections,(function(t,i){return[n("div",{staticClass:"title"},[e._v(e._s(t.title))]),e._l(t.paragraphs,(function(t,i){return[n("p",{class:t.style},[e._v(" "+e._s(t.text)+" ")])]}))]}))],2)},uo=[],ho=JSON.parse(JSON.stringify(io)),fo={data:function(){return{obj:{}}},created:function(){var e=this;this.obj=Object.assign({},ho.filter((function(t){return t.id===e.$route.params.id}))[0])}},po=fo,mo=Object(x["a"])(po,co,uo,!1,null,null,null),vo=mo.exports,go=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v(e._s(e.headerText))])]),n("v-card-text",[n("v-container",[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[n("v-date-picker",{model:{value:e.weight.created,callback:function(t){e.$set(e.weight,"created",t)},expression:"weight.created"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{staticClass:"weight-input",attrs:{label:"Value",suffix:"lbs"},model:{value:e.weight.value,callback:function(t){e.$set(e.weight,"value",t)},expression:"weight.value"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Notes"},model:{value:e.weight.notes,callback:function(t){e.$set(e.weight,"notes",t)},expression:"weight.notes"}})],1),n("v-flex",{staticClass:"text-xs-center",attrs:{xs12:""}},[n("v-btn",{on:{click:function(t){return e.addOrEditWeight()}}},[e._v(e._s(e.submitText))])],1)],1)],1)],1)],1)],1),n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{row:"",wrap:"","px-2":""}},[n("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[e._v(" Create new weight: "),n("v-btn",{staticClass:"green--text",attrs:{icon:""},on:{click:function(t){return e.openAddOrEditWeight(null,null)}}},[n("fa-icon",{attrs:{icon:"plus"}})],1)],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("div",{staticClass:"text-sm-left text-md-right headline font-weight-bold"},[e._v("Average weight loss / week:")]),n("div",{staticClass:"text-sm-left text-md-right headline",class:e.weightLossCss},[e._v(e._s(e.avgWeightLossWeek+" lbs"))]),n("div",{staticClass:"text-sm-left text-md-right headline font-weight-bold"},[e._v("Total Weight Loss:")]),n("div",{staticClass:"text-sm-left text-md-right headline",class:e.weightLossCss},[e._v(e._s(e.totalWeightLoss+" lbs"))])]),n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"headline"},[e._v("Filtering:")])]),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"Filter Start Date","prepend-icon":"event",readonly:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{text:"",icon:""},on:{click:function(t){e.filterStartDate=null}}},[n("fa-icon",{attrs:{icon:"window-close"}})],1)]},proxy:!0}],null,!0),model:{value:e.filterStartDate,callback:function(t){e.filterStartDate=t},expression:"filterStartDate"}},"v-text-field",o,!1),i))]}}]),model:{value:e.filterStartDateMenu,callback:function(t){e.filterStartDateMenu=t},expression:"filterStartDateMenu"}},[n("v-date-picker",{on:{input:function(t){e.filterStartDateMenu=!1}},model:{value:e.filterStartDate,callback:function(t){e.filterStartDate=t},expression:"filterStartDate"}})],1)],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{label:"End Date","prepend-icon":"event",readonly:""},scopedSlots:e._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{text:"",icon:""},on:{click:function(t){e.filterEndDate=null}}},[n("fa-icon",{attrs:{icon:"window-close"}})],1)]},proxy:!0}],null,!0),model:{value:e.filterEndDate,callback:function(t){e.filterEndDate=t},expression:"filterEndDate"}},"v-text-field",o,!1),i))]}}]),model:{value:e.filterEndDateMenu,callback:function(t){e.filterEndDateMenu=t},expression:"filterEndDateMenu"}},[n("v-date-picker",{on:{input:function(t){e.filterEndDateMenu=!1}},model:{value:e.filterEndDate,callback:function(t){e.filterEndDate=t},expression:"filterEndDate"}})],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.getHeaders,items:e.filteredWeightList},scopedSlots:e._u([{key:"body",fn:function(t){var i=t.items;return[n("tbody",e._l(i,(function(t){return n("tr",{key:t.id,on:{click:function(n){return e.openAddOrEditWeight(t,n)}}},[n("td",[e._v(e._s(e.getDate(t.created)))]),n("td",[e._v(e._s(t.value))]),n("td",[e._v(e._s(t.notes))]),n("td",{staticClass:"action-td"},[n("fa-icon",{attrs:{size:"lg",icon:"window-close"},on:{click:function(n){return e.deleteItem(t.id)}}})],1)])})),0)]}},{key:"no-data",fn:function(){return[e._v(" NO DATA HERE! ")]},proxy:!0},{key:"no-results",fn:function(){return[e._v(" NO RESULTS HERE! ")]},proxy:!0}])})],1)],1)],1)],1)},bo=[],xo="api/weight/list",yo="api/weight/add",wo="api/weight/edit",_o="api/weight/delete",ko={getWeightList:function(){return tt.get(xo)},deleteWeight:function(e){return tt.request({url:_o,method:"delete",params:{id:e}})},addWeight:function(e){return tt.post(yo,e)},editWeight:function(e){return tt.post(wo,e)}};function Lo(e){var t=null;return"undefined"!==typeof e&&(t=e),{id:-1,created:(new Date).toISOString().substr(0,10),value:"",userId:t,notes:null}}var $o={data:function(){return{filteredWeightList:[],filterStartDate:null,filterEndDate:null,filterStartDateMenu:!1,filterEndDateMenu:!1,weightList:[],weight:null,tableOptions:{sortBy:["created"],sortDesc:[!0],itemsPerPage:25},startDate:null,endDate:null,startWeight:0,endWeight:0,dialogOpen:!1}},created:function(){this.weight=Lo(),this.getData()},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({user:function(e){return e.auth.user}})),{},{headerText:function(){return"undefined"===typeof this.weight||null===this.weight?"":this.weight.id>0?"Edit Existing Weight":"Add New Weight"},submitText:function(){return"undefined"===typeof this.weight||null===this.weight?"Submit":this.weight.id>0?"Update":"Add"},getHeaders:function(){return[{text:"Date",align:"start",value:"created",sortable:!0,width:"21%"},{text:"Weight",align:"start",value:"value",sortable:!0,width:"21%"},{text:"Notes",align:"start",value:"notes",sortable:!1,width:"51%"},{text:"Actions",align:"start",value:"actions",sortable:!1,width:"7%"}]},totalWeightLoss:function(){return"number"!==typeof this.startWeight||"number"!==typeof this.endWeight?0:(this.startWeight-this.endWeight).toFixed(2)},avgWeightLossPerDay:function(){var e=0;if(!Array.isArray(this.weightList)||0===this.weightList.length)return this.$_console_log("[AverageWeightLoss] No weights in list"),e;var t=Math.abs(this.endDate-this.startDate),n=Math.ceil(t/864e5);return 0===n?(this.$_console_log("[AverageWeightLoss] Difference in days is 0, can't divide by 0"),e):(e=(this.startWeight-this.endWeight)/n,this.$_console_log("[AverageWeightLoss] Weight loss: "+e),e)},avgWeightLossWeek:function(){return(7*this.avgWeightLossPerDay).toFixed(2)},weightLossCss:function(){return console.log(this.avgWeightLossWeek),this.avgWeightLossWeek>=2?"green--text":this.avgWeightLossWeek>=1?"yellow--text":this.avgWeightLossWeek>=0?"orange--text":this.avgWeightLossWeek<0?"red--text":void 0}}),watch:{weightList:{handler:function(e){null!==this.filterStartDate&&null!==this.filterEndDate||(this.filteredWeightList=e)},deep:!0},filteredWeightList:{handler:function(e){var t=this;if(!Array.isArray(e)||0===e.length)return this.startDate=null,this.endDate=null,this.startWeight=0,void(this.endWeight=0);var n=e.map((function(e){return new Date(e.created)}));this.endDate=new Date(Math.max.apply(null,n)),this.startDate=new Date(Math.min.apply(null,n)),this.$_console_log("End Date: ",this.endDate),this.endWeight=e.find((function(e){return new Date(e.created).getTime()==t.endDate.getTime()})).value,this.startWeight=e.find((function(e){return new Date(e.created).getTime()==t.startDate.getTime()})).value},deep:!0},filterStartDate:function(e){this.filteredWeightList=this.filterWeight(e,this.filterEndDate)},filterEndDate:function(e){this.filteredWeightList=this.filterWeight(this.filterStartDate,e)}},methods:{getData:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$_console_log("[Weight] Get weights"),jt.request((function(){ko.getWeightList().then((function(t){e.$_console_log("[Weight] Success getting weights"),e.$_console_log(t.data),Array.isArray(t.data)?e.weightList=t.data:e.weightList=[]})).catch((function(){return e.$_console_log("[Weight] Error getting weights")}))}));case 2:case"end":return t.stop()}}),t)})))()},filterWeight:function(e,t){var n=null,i=null;if(null!==e&&(n=new Date(e).getTime()),null!==t&&(i=new Date(t).getTime()+86e6),null===n&&null===i)return this.weightList.slice(0);var o=this.weightList.slice(0).filter((function(e){var t=new Date(e.created).getTime();return null===n?t<=i:null===i?t>=n:t>=n&&t<=i}));return o},openAddOrEditWeight:function(e,t){if(this.$_console_log("[Weight] Creating or editing a weight object"),"undefined"!==typeof e)if(null!==t&&(t.target.classList.contains("action-td")||t.target.parentNode.classList.contains("action-td")||t.target.parentNode.parentNode.classList.contains("action-td")))this.$_console_log("[Weight] Some button was pressed, don't open the dialog.");else{if(null===e)this.weight=Lo(this.user.id);else{var n=Lo(this.user.id);n.id=e.id,n.value=e.value,n.notes=e.notes,n.created=e.created.substr(0,e.created.indexOf("T")),this.weight=Object.assign({},n)}this.dialogOpen=!0}else this.$_console_log("[Weight] Open Add Or Edit Weight: Weight is undefined or empty")},addOrEditWeight:function(){"undefined"!==typeof this.weight&&null!==this.weight?this.weight.id<=0?this.addNew(this.weight):this.editWeight(this.weight):this.$_console_log("[Weight] Add or Edit Weight: Weight is null or empty, exiting")},addNew:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$_console_log("[Weight] Create weight"),t.$_console_log(e),""===e.value?t.$_console_log("[Weight] Weight is empty, not going to create it"):jt.request((function(){ko.addWeight(e).then((function(e){t.$_console_log("[Weight] Success creating weight"),t.weight=Lo(t.user.id),t.weightList.push(e.data),t.dialogOpen=!1})).catch((function(){return t.$_console_log("[Weight] Error creating weight")}))}));case 3:case"end":return n.stop()}}),n)})))()},editWeight:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.$_console_log("[Weight] Edit weight"),t.$_console_log(e),!("undefined"===typeof e||null===e||e.id<=0||""===e.value)){n.next=5;break}return t.$_console_log("[Weight] Weight is empty, null, the id is less than or equal to 0, or the value is empty. Not going to edit it"),n.abrupt("return");case 5:jt.request((function(){ko.editWeight(e).then((function(n){t.$_console_log("[Weight] Success editing weight");var i=t.weightList.findIndex((function(t){return t.id===e.id}));-1===i?t.$_console_log("[Weight] Index is -1. Weight doesn\t exist in list. Can't update local list."):t.weightList.splice(i,1,n.data)})).catch((function(){return t.$_console_log("[Weight] Error editing weight")})).then((function(){return t.dialogOpen=!1}))}));case 6:case"end":return n.stop()}}),n)})))()},getDate:function(e){return null==e||e.length<11?"Unknown":e.substr(0,e.indexOf("T"))},deleteItem:function(e){var t=this;return Object(L["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$_console_log("[Weight] Delete weight with id: ".concat(e)),jt.request((function(){ko.deleteWeight(e).then((function(n){t.$_console_log("[Weight] Success deleting weight");var i=t.weightList.findIndex((function(t){return t.id===e}));i>=0&&t.weightList.splice(i,1)})).catch((function(){return t.$_console_log("[Weight] Error creating weight")}))}));case 2:case"end":return n.stop()}}),n)})))()}}},jo=$o,Oo=(n("c084"),n("8fea")),Co=n("2e4b"),To=Object(x["a"])(jo,go,bo,!1,null,"f51da7d8",null),Do=To.exports;A()(To,{VBtn:S["a"],VCard:ae["a"],VCardText:ze["b"],VCardTitle:ze["c"],VContainer:F["a"],VDataTable:Oo["a"],VDatePicker:Co["a"],VDialog:dn["a"],VFlex:He["a"],VLayout:qe["a"],VMenu:pe["a"],VTextField:N["a"]});var Mo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("depedency-editor-dialog",{attrs:{open:e.dependencyEditorDialogOpen},on:{closeDialog:e.closeDependencyEditorDialogWindow}}),n("book-dialog",{attrs:{open:e.bookDialogOpen,book:e.activeBook,loading:e.loadingBook},on:{closeDialog:e.closeBookDialogWindow}}),n("v-container",[n("v-flex",{attrs:{xs12:""}},[e._v(" Dependency Editor "),n("v-btn",{staticClass:"green--text",attrs:{icon:""},on:{click:function(t){e.dependencyEditorDialogOpen=!0}}},[n("fa-icon",{attrs:{icon:"plus"}})],1)],1),n("v-flex",{attrs:{xs12:""}},[e._v(" Create new book entry: "),n("v-btn",{staticClass:"green--text",attrs:{icon:""},on:{click:function(t){return e.openAddOrEditBookDialog(null,null)}}},[n("fa-icon",{attrs:{icon:"plus"}})],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Search Book List"},model:{value:e.bookSearch,callback:function(t){e.bookSearch=t},expression:"bookSearch"}})],1),n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.getHeaders,items:e.bookList,search:e.bookSearch},scopedSlots:e._u([{key:"body",fn:function(t){var i=t.items;return[n("tbody",e._l(i,(function(t){return n("tr",{key:t.id,on:{click:function(n){return e.openAddOrEditBookDialog(t,n)}}},[n("td",[e._v(e._s(e.getTitle(t)))]),null!==t.bookAuthors?n("td",e._l(t.bookAuthors,(function(t,i){return n("div",{key:i},[null!==t.author?[n("p",[e._v(e._s(t.author.fullName))])]:e._e()],2)})),0):n("td"),n("td",{staticClass:"hidden-sm-and-down"},[e._v(e._s(t.edition))]),n("td",{staticClass:"hidden-xs-only"},e._l(t.bookGenres,(function(t,i){return n("div",{key:i},[null!==t.genre?[n("p",[e._v(e._s(t.genre.name))])]:e._e()],2)})),0),n("td",{staticClass:"hidden-sm-and-down"},[e._v(e._s(e.getPublicationDate(t.publicationDate)))]),t.hardcover?n("td",{staticClass:"hidden-xs-only"},[n("fa-icon",{attrs:{icon:"check"}})],1):n("td",{staticClass:"hidden-xs-only"},[n("fa-icon",{attrs:{icon:"times"}})],1),t.isRead?n("td",{staticClass:"hidden-xs-only"},[n("fa-icon",{attrs:{icon:"check"}})],1):n("td",{staticClass:"hidden-xs-only"},[n("fa-icon",{attrs:{icon:"times"}})],1),t.boxset?n("td",{staticClass:"hidden-sm-and-down"},[n("fa-icon",{attrs:{icon:"check"}})],1):n("td",{staticClass:"hidden-sm-and-down"},[n("fa-icon",{attrs:{icon:"times"}})],1),t.loaned?n("td",{staticClass:"hidden-sm-and-down"},[n("fa-icon",{attrs:{icon:"check"}})],1):n("td",{staticClass:"hidden-sm-and-down"},[n("fa-icon",{attrs:{icon:"times"}})],1),n("td",[e._v(e._s(e.getBookcaseName(t)))]),e.hasSeriesInfo(t)?n("td",{staticClass:"hidden-xs-only"},[t.series.active?n("fa-icon",{attrs:{icon:"minus"}}):n("fa-icon",{attrs:{icon:"ban"}}),e._v(" "+e._s(t.series.name)+" ("+e._s(t.seriesNumber)+" / "+e._s(t.series.number)+") ")],1):n("td",{staticClass:"hidden-xs-only"}),n("td",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return n.preventDefault(),e.deleteBook(t)}}},[n("fa-icon",{attrs:{size:"md",icon:"window-close"}})],1)],1)])})),0)]}},{key:"no-data",fn:function(){return[e._v(" NO DATA HERE! ")]},proxy:!0},{key:"no-results",fn:function(){return[e._v(" NO RESULTS HERE! ")]},proxy:!0}])})],1)],1)},Ao=[],Bo=(n("8a79"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":e.maxModalWidth},model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[n("v-card",[n("v-card-title",[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialogOpen=!1}}},[n("fa-icon",{attrs:{icon:"times"}})],1),n("span",{staticClass:"headline center"},[e._v("Book dependency editor")])],1),n("v-card-text",[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-tabs",{attrs:{"fixed-tabs":"","hide-slider":""},model:{value:e.activeType,callback:function(t){e.activeType=t},expression:"activeType"}},e._l(e.typeList,(function(t,i){return n("v-tab",{key:i},[e._v(" "+e._s(t)+" ")])})),1)],1),n("v-flex",{staticClass:"py-1",staticStyle:{"text-align":"center"},attrs:{xs12:""}},[n("v-btn",{staticClass:"primary center",on:{click:function(t){return e.addObject()}}},[e._v(" Add new "+e._s(e.typeList[e.activeType])+" ")])],1),n("v-flex",{attrs:{xs12:"",sm6:""}},[n("v-list-item-group",{model:{value:e.activeObject,callback:function(t){e.activeObject=t},expression:"activeObject"}},e._l(e.activeList,(function(t,i){return n("v-list-item",{key:i},[e.activeType===e.typeConsts.Author?n("v-list-item-content",[e._v(" "+e._s(t.fullName)+" ")]):e.activeType===e.typeConsts.Bookcase||e.activeType===e.typeConsts.Series||e.activeType===e.typeConsts.Shelf?n("v-list-item-content",[e._v(" "+e._s(t.name)+" ")]):e._e()],1)})),1)],1),n("v-flex",{attrs:{xs12:"",sm6:""}},["undefined"!==typeof e.activeObject&&null!==e.activeObject&&null!==e.selectedObject?[n("v-form",{ref:"objectForm",attrs:{"lazy-validation":""},model:{value:e.validated,callback:function(t){e.validated=t},expression:"validated"}},[e.activeType===e.typeConsts.Author?[n("v-flex",{attrs:{xs12:"","pl-2":""}},[n("v-text-field",{attrs:{label:"First Name"},model:{value:e.selectedObject.firstName,callback:function(t){e.$set(e.selectedObject,"firstName",t)},expression:"selectedObject.firstName"}})],1),n("v-flex",{attrs:{xs12:"","pl-2":""}},[n("v-text-field",{attrs:{label:"Last Name",rules:[e.rules.required]},model:{value:e.selectedObject.lastName,callback:function(t){e.$set(e.selectedObject,"lastName",t)},expression:"selectedObject.lastName"}})],1),n("v-flex",{attrs:{xs12:"","pl-1":""}},[n("v-checkbox",{attrs:{label:"Deceased"},model:{value:e.selectedObject.deceased,callback:function(t){e.$set(e.selectedObject,"deceased",t)},expression:"selectedObject.deceased"}})],1)]:e.activeType===e.typeConsts.Bookcase?[n("v-flex",{attrs:{xs12:"","pl-2":""}},[n("v-text-field",{attrs:{label:"Name",rules:[e.rules.required]},model:{value:e.selectedObject.name,callback:function(t){e.$set(e.selectedObject,"name",t)},expression:"selectedObject.name"}})],1)]:e.activeType===e.typeConsts.Series?[n("v-flex",{attrs:{xs12:"","pl-2":""}},[n("v-text-field",{attrs:{label:"Name",rules:[e.rules.required]},model:{value:e.selectedObject.name,callback:function(t){e.$set(e.selectedObject,"name",t)},expression:"selectedObject.name"}})],1),n("v-flex",{attrs:{xs12:"","pl-2":""}},[n("v-text-field",{attrs:{label:"Number"},model:{value:e.selectedObject.number,callback:function(t){e.$set(e.selectedObject,"number",t)},expression:"selectedObject.number"}})],1),n("v-flex",{attrs:{xs12:"","pl-1":""}},[n("v-checkbox",{attrs:{label:"Active"},model:{value:e.selectedObject.active,callback:function(t){e.$set(e.selectedObject,"active",t)},expression:"selectedObject.active"}})],1)]:e.activeType===e.typeConsts.Shelf?[n("v-flex",{attrs:{xs12:"","pl-2":""}},[n("v-select",{attrs:{items:e.bookcaseList,label:"Bookcase","item-value":"id","item-text":"name",rules:[e.rules.required]},model:{value:e.selectedObject.bookcaseId,callback:function(t){e.$set(e.selectedObject,"bookcaseId",t)},expression:"selectedObject.bookcaseId"}})],1),n("v-flex",{attrs:{xs12:"","pl-2":""}},[n("v-text-field",{attrs:{label:"Name",rules:[e.rules.required]},model:{value:e.selectedObject.name,callback:function(t){e.$set(e.selectedObject,"name",t)},expression:"selectedObject.name"}})],1)]:e._e()],2),n("v-flex",{attrs:{xs12:""}},[n("v-btn",{on:{click:function(t){e.selectedObject=null}}},[e._v(" CANCEL ")]),n("v-btn",{staticClass:"primary",attrs:{disabled:!e.validated},on:{click:function(t){return e.updateObject()}}},[e._v(" SAVE ")]),n("v-btn",{staticClass:"float-right",on:{click:function(t){return e.deleteObject()}}},[e._v(" DELETE ")])],1)]:e._e()],2)],1)],1)],1)],1)}),So=[],Fo=function(){return{id:0,name:""}},Io=function(){return{id:0,name:"",number:0,active:!1}},No=function(){return{id:0,name:""}},Ro=function(){return{id:0,firstName:null,lastName:null,fullName:null,deceased:!1}},Vo=function(e){return(e<10?"0":"")+e},Eo="Author",Wo="Bookcase",Uo="Series",Po="Shelf",zo=0,Ho=1,qo=2,Go=3;function Jo(e){if(null===e||"number"!==typeof e)return null;switch(e){case zo:return Ro();case Ho:return Fo();case qo:return Io();case Go:return No();default:break}}var Yo={data:function(){return{dialogOpen:!1,selectedObject:null,activeObject:null,activeType:null,activeList:[],typeList:[Eo,Wo,Uo,Po],typeConsts:{Author:zo,Bookcase:Ho,Series:qo,Shelf:Go},rules:{required:function(e){return!!e||"Value is required"}},validated:!1}},props:{open:{type:Boolean,default:!1}},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({authorList:function(e){return e.library.authors},bookcaseList:function(e){return e.library.bookcases},seriesList:function(e){return e.library.series},shelfList:function(e){return e.library.shelves}})),{},{maxModalWidth:function(){return window.innerWidth>1640?1500:window.innerWidth>1360?1200:window.innerWidth>960?800:window.innerWidth>720?600:window.innerWidth>600?500:420}}),watch:{open:function(e){this.$_console_log("[Dependency Editor Open] open = ".concat(e)),this.dialogOpen=e},dialogOpen:function(e){!1===e?(this.$_console_log("[Dependency Editor Dialog Open] Dialog open = false"),this.$emit("closeDialog",!1)):this.$_console_log("[Dependency Editor Dialog OpenAuthor Dialog] Dialog open = true")},activeType:function(e,t){if(this.$_console_log("[Dependency Editor Active Type] New value is: ".concat(e)),null===e||"number"!==typeof e)return this.activeList=[],void(this.activeObject=-1);t!==e&&(this.activeList=[],this.activeObject=-1,this.getActiveList(e))},activeObject:function(e){if(this.$_console_log("Selected object watcher",e),null===e||"number"!==typeof e)return this.selectedObject=null,void(this.activeObject=-1);this.selectedObject=-1!==e?Object.assign({},this.activeList[e]):null}},methods:{getActiveList:function(e){switch("undefined"!==typeof e&&null!==e||(e=this.activeType),e){case 0:this.activeList=this.authorList.slice(0);break;case 1:this.activeList=this.bookcaseList.slice(0);break;case 2:this.activeList=this.seriesList.slice(0);break;case 3:this.activeList=this.shelfList.slice(0);break;default:break}},addObject:function(){if(null!==this.activeType&&"number"===typeof this.activeType){var e=Jo(this.activeType);null!==e?(this.activeList.push(e),this.activeObject=this.activeList.length-1):this.$_console_log("[Dependency Editor] Add Object: New object is null. Not making a new object")}else this.$_console_log("[Dependency Editor] Add Object: Active type is null or not a number: (".concat(this.activeType,")"))},updateObject:function(){var e=this;null!==this.activeType&&"number"===typeof this.activeType?0===this.selectedObject.id?this.$refs.objectForm.validate()&&this.$store.dispatch("add".concat(this.typeList[this.activeType]),this.selectedObject).then((function(t){e.$_console_log("[Dependency Editor] Update Object: Successfully added new object of type (".concat(e.typeList[e.activeType],"). Removing temp object.")),e.getActiveList(),e.selectedObject=e.activeList.find((function(e){return e.id===t.id}))})):this.$refs.objectForm.validate()&&(this.$store.dispatch("edit".concat(this.typeList[this.activeType]),this.selectedObject),this.getActiveList()):this.$_console_log("[Dependency Editor] Update Object: Active type is null or not a number: (".concat(this.activeType,")"))},deleteObject:function(){var e=this;null!==this.activeType&&"number"===typeof this.activeType?this.selectedObject.id<=0?(this.activeObject=-1,this.getActiveList()):this.$store.dispatch("delete".concat(this.typeList[this.activeType]),this.selectedObject.id).then((function(t){e.activeObject=-1,e.getActiveList()})):this.$_console_log("[Dependency Editor] Delete Object: Active type is null or not a number: (".concat(this.activeType,")"))}}},Ko=Yo,Qo=n("ac7c"),Xo=n("71a3"),Zo=n("fe57"),es=Object(x["a"])(Ko,Bo,So,!1,null,null,null),ts=es.exports;A()(es,{VBtn:S["a"],VCard:ae["a"],VCardText:ze["b"],VCardTitle:ze["c"],VCheckbox:Qo["a"],VDialog:dn["a"],VFlex:He["a"],VForm:I["a"],VLayout:qe["a"],VListItem:he["a"],VListItemContent:fe["a"],VListItemGroup:Tt["a"],VSelect:z["a"],VTab:Xo["a"],VTabs:Zo["a"],VTextField:N["a"]});var ns=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":e.maxModalWidth},model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[n("v-card",[n("v-card-title",[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialogOpen=!1}}},[n("fa-icon",{attrs:{icon:"times"}})],1),n("span",{staticClass:"headline center"},[e._v(e._s(e.addEditDialogTitle))])],1),n("v-card-text",[n("v-container",[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Title"},model:{value:e.activeBook.title,callback:function(t){e.$set(e.activeBook,"title",t)},expression:"activeBook.title"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Sub Title"},model:{value:e.activeBook.subTitle,callback:function(t){e.$set(e.activeBook,"subTitle",t)},expression:"activeBook.subTitle"}})],1),n("v-flex",{attrs:{xs12:""}},[e._v("Authors:")]),n("v-flex",{attrs:{xs10:"","pr-1":""}},[n("v-combobox",{attrs:{items:e.filteredAuthorList,loading:e.authorIsLoading,"search-input":e.authorSearch,color:"white","hide-no-data":"","hide-selected":"","item-text":"fullName","item-value":"id",label:"Author Search",placeholder:"Start typing to Search","prepend-icon":"fas fa-book-reader","return-object":""},on:{"update:searchInput":function(t){e.authorSearch=t},"update:search-input":function(t){e.authorSearch=t},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addAuthorToBook()}},model:{value:e.authorToAdd,callback:function(t){e.authorToAdd=t},expression:"authorToAdd"}})],1),n("v-flex",{attrs:{xs2:""}},[n("v-btn",{on:{click:function(t){return e.addAuthorToBook()}}},[e._v("Add")])],1),"undefined"!==typeof e.activeBook.authors&&null!==e.activeBook.authors&&e.activeBook.authors.length>0&&!e.deletingAuthor?e._l(e.activeBook.authors,(function(t,i){return n("v-flex",{key:"author"+i,attrs:{xs12:"","px-2":""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs11:"",sm10:"","pr-1":""}},[n("v-text-field",{attrs:{label:"Full Name",disabled:t.fromAutocomplete},model:{value:t.fullName,callback:function(n){e.$set(t,"fullName",n)},expression:"item.fullName"}})],1),n("v-flex",{staticClass:"hidden-xs-only",attrs:{sm1:""}},[n("v-checkbox",{attrs:{label:"Deceased",disabled:t.fromAutocomplete},model:{value:t.deceased,callback:function(n){e.$set(t,"deceased",n)},expression:"item.deceased"}})],1),n("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteAuthor(i)}}},[n("fa-icon",{attrs:{size:"md",icon:"window-close"}})],1)],1)],1)],1)})):e._e(),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Publication Date"},model:{value:e.activeBook.publicationDate,callback:function(t){e.$set(e.activeBook,"publicationDate",t)},expression:"activeBook.publicationDate"}})],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Edition"},model:{value:e.activeBook.edition,callback:function(t){e.$set(e.activeBook,"edition",t)},expression:"activeBook.edition"}})],1),n("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[n("v-checkbox",{attrs:{label:"Hardcover"},model:{value:e.activeBook.hardcover,callback:function(t){e.$set(e.activeBook,"hardcover",t)},expression:"activeBook.hardcover"}})],1),n("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[n("v-checkbox",{attrs:{label:"Read"},model:{value:e.activeBook.isRead,callback:function(t){e.$set(e.activeBook,"isRead",t)},expression:"activeBook.isRead"}})],1),n("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[n("v-checkbox",{attrs:{label:"Boxset"},model:{value:e.activeBook.boxset,callback:function(t){e.$set(e.activeBook,"boxset",t)},expression:"activeBook.boxset"}})],1),n("v-flex",{attrs:{xs12:"",sm6:"",md3:""}},[n("v-checkbox",{attrs:{label:"Loaned Out"},model:{value:e.activeBook.loaned,callback:function(t){e.$set(e.activeBook,"loaned",t)},expression:"activeBook.loaned"}})],1),n("v-flex",{attrs:{xs10:""}},[n("v-select",{attrs:{items:e.genreList,label:"Genres","item-value":"id","item-text":"name"},model:{value:e.genreToAdd,callback:function(t){e.genreToAdd=t},expression:"genreToAdd"}})],1),n("v-flex",{attrs:{xs2:""}},[n("v-btn",{on:{click:function(t){return e.addGenreToBook()}}},[e._v("Add")])],1),"undefined"!==typeof e.activeBook.genres&&null!==e.activeBook.genres&&e.activeBook.genres.length>0&&!e.deletingGenre?[n("v-flex",{attrs:{xs12:""}},[e._v("Genre List")]),e._l(e.activeBook.genres,(function(t,i){return n("v-flex",{key:"genre"+i,attrs:{xs12:"","px-2":""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs10:"","pr-1":""}},[n("v-text-field",{attrs:{label:"Name",disabled:""},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1),n("v-flex",{staticClass:"hidden-xs-only",attrs:{sm1:""}},[n("v-checkbox",{attrs:{label:"Fiction",disabled:""},model:{value:t.fiction,callback:function(n){e.$set(t,"fiction",n)},expression:"item.fiction"}})],1),n("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteGenre(i)}}},[n("fa-icon",{attrs:{size:"md",icon:"window-close"}})],1)],1)],1)],1)}))]:e._e(),null!=e.activeBook.series?[n("v-flex",{attrs:{xs12:""}},[e._v(" Series: ")]),n("v-flex",{attrs:{xs12:"",sm7:"","pr-1":""}},[n("v-combobox",{attrs:{items:e.seriesList,loading:e.seriesIsLoading,"search-input":e.seriesSearch,color:"white","hide-no-data":"","hide-selected":"","item-text":"name","item-value":"id",label:"Series Search",placeholder:"Start typing to Search","prepend-icon":"fas fa-book","return-object":""},on:{"update:searchInput":function(t){e.seriesSearch=t},"update:search-input":function(t){e.seriesSearch=t}},model:{value:e.activeBook.series,callback:function(t){e.$set(e.activeBook,"series",t)},expression:"activeBook.series"}})],1),n("v-flex",{attrs:{xs7:"",sm3:"","px-1":""}},[n("v-text-field",{attrs:{label:"Total Number in Series"},model:{value:e.activeBook.series.number,callback:function(t){e.$set(e.activeBook.series,"number",t)},expression:"activeBook.series.number"}})],1),n("v-flex",{attrs:{xs4:"",sm1:""}},[n("v-checkbox",{attrs:{label:"Active"},model:{value:e.activeBook.series.active,callback:function(t){e.$set(e.activeBook.series,"active",t)},expression:"activeBook.series.active"}})],1),n("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteSeries()}}},[n("fa-icon",{attrs:{size:"md",icon:"window-close"}})],1)],1),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Book's Series Number"},model:{value:e.activeBook.seriesNumber,callback:function(t){e.$set(e.activeBook,"seriesNumber",t)},expression:"activeBook.seriesNumber"}})],1)]:e._e(),null===e.activeBook.series?n("v-flex",{attrs:{xs12:"","mt-3":""}},[n("v-btn",{on:{click:function(t){return e.addSeries()}}},[n("fa-icon",{attrs:{icon:"plus"}}),e._v(" Add Series ")],1)],1):e._e(),null!=e.activeBook.bookcase?[n("v-flex",{attrs:{xs12:"","mt-3":""}},[e._v(" Bookcase: ")]),n("v-flex",{attrs:{xs11:"","pr-1":""}},[n("v-combobox",{attrs:{items:e.bookcaseList,loading:e.bookcaseIsLoading,"search-input":e.bookcaseSearch,color:"white","hide-no-data":"","hide-selected":"","item-text":"name","item-value":"id",label:"Bookcase Search",placeholder:"Start typing to Search","prepend-icon":"mdi-bookcase","return-object":""},on:{"update:searchInput":function(t){e.bookcaseSearch=t},"update:search-input":function(t){e.bookcaseSearch=t}},model:{value:e.activeBook.bookcase,callback:function(t){e.$set(e.activeBook,"bookcase",t)},expression:"activeBook.bookcase"}})],1),n("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteBookcase()}}},[n("fa-icon",{attrs:{size:"md",icon:"window-close"}})],1)],1),null!=e.activeBook.shelf?[n("v-flex",{attrs:{xs12:"","mt-3":""}},[e._v(" Shelf: ")]),n("v-flex",{attrs:{xs11:"","pr-1":""}},[n("v-combobox",{attrs:{items:e.filteredShelfList,loading:e.shelfIsLoading,"search-input":e.shelfSearch,color:"white","hide-no-data":"","hide-selected":"","item-text":"name","item-value":"id",label:"Shelf Search",placeholder:"Start typing to Search","prepend-icon":"mdi-bookcase","return-object":""},on:{"update:searchInput":function(t){e.shelfSearch=t},"update:search-input":function(t){e.shelfSearch=t}},model:{value:e.activeBook.shelf,callback:function(t){e.$set(e.activeBook,"shelf",t)},expression:"activeBook.shelf"}})],1),n("v-flex",{staticClass:"text-right",attrs:{xs1:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteShelf()}}},[n("fa-icon",{attrs:{size:"md",icon:"window-close"}})],1)],1)]:e._e(),null===e.activeBook.shelf&&"undefined"!==typeof e.activeBook.bookcase.name&&""!==e.activeBook.bookcase.name?n("v-flex",{attrs:{xs12:"","my-3":""}},[n("v-btn",{on:{click:function(t){return e.addShelf()}}},[n("fa-icon",{attrs:{icon:"plus"}}),e._v(" Add Shelf ")],1)],1):e._e()]:e._e(),null===e.activeBook.bookcase?n("v-flex",{attrs:{xs12:"","my-3":""}},[n("v-btn",{on:{click:function(t){return e.addBookcase()}}},[n("fa-icon",{attrs:{icon:"plus"}}),e._v(" Add Bookcase ")],1)],1):e._e(),n("v-flex",{staticClass:"text-right",attrs:{xs12:""}},[n("v-btn",{on:{click:function(t){return e.addOrUpdateBook(null)}}},[e._v("Submit")])],1)],2)],1)],1)],1)],1)},is=[];n("498a");function os(e){var t={book:{id:e.id,title:e.title,subTitle:e.subTitle,publicationDate:e.publicationDate,edition:e.edition,hardcover:e.hardcover,isRead:e.isRead,loaned:e.loaned,boxset:e.boxset,notes:e.notes,seriesNumber:e.seriesNumber},authors:e.authors,bookcase:e.bookcase,genres:e.genres,series:e.series,shelf:e.shelf};return t}function ss(){return{id:0,boxset:!1,edition:null,isRead:!1,hardcover:!1,loaned:!1,notes:null,publicationDate:null,seriesNumber:0,subTitle:null,title:"",bookcaseId:null,shelfId:null,seriesId:null,userId:null,user:null,bookcase:null,series:null,shelf:null,authors:[],genres:[]}}var rs={data:function(){return{dialogOpen:!1,activeBook:{},seriesIsLoading:!1,seriesSearch:"",bookcaseIsLoading:!1,bookcaseSearch:"",shelfIsLoading:!1,shelfSearch:"",authorIsLoading:!1,authorSearch:"",authorToAdd:null,genreToAdd:-1,deletingAuthor:!1,deletingGenre:!1,filteredAuthorList:[],filteredGenreList:[],filteredShelfList:[]}},props:{open:{type:Boolean,default:!1},book:{type:Object,required:!1},loading:{type:Boolean,default:!1}},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({authorList:function(e){return e.library.authors},bookList:function(e){return e.library.books},bookcaseList:function(e){return e.library.bookcases},genreList:function(e){return e.library.genres},seriesList:function(e){return e.library.series},shelfList:function(e){return e.library.shelves}})),{},{maxModalWidth:function(){return window.innerWidth>1640?1500:window.innerWidth>1360?1200:window.innerWidth>960?800:window.innerWidth>720?600:window.innerWidth>600?500:420},addEditDialogTitle:function(){return this.activeBook.id>0?"Edit Book":"Add New Book"}}),watch:{open:function(e){this.$_console_log("[Library Dialog] open = ".concat(e)),this.dialogOpen=e},dialogOpen:function(e){!1===e?(this.$_console_log("[Library Dialog] Dialog open = false"),this.$emit("closeDialog",!1)):this.$_console_log("[Library Dialog] Dialog open = true")},book:function(e){this.loading&&this.$_console_log("Active book watcher: Book is loading."),this.activeBook="undefined"===typeof e||null===e?ss():e,this.authorToAdd=Ro(),this.updateFilteredAuthorList()},"activeBook.bookcaseId":function(e,t){this.loading?this.$_console_log("Active book bookcase id watcher: Book is loading. Exiting."):"undefined"!==typeof e?(this.activeBook.shelf=null,this.activeBook.shelfId=null,this.updateFilteredShelfList()):this.$_console_log("Bookcase Id watcher: Value is undefined. Exiting")},"activeBook.bookcase":function(e){this.loading?this.$_console_log("Active book bookcase watcher: Book is loading. Exiting."):"string"===typeof e?(this.activeBook.bookcase=Fo(),this.activeBook.bookcase.name=e):"object"===Object(Y["a"])(e)&&null!==e&&e.id>0&&(this.activeBook.bookcaseId=e.id)},"activeBook.series":function(e){this.loading?this.$_console_log("Active book series watcher: Book is loading. Exiting."):"string"===typeof e?(this.activeBook.series=Io(),this.activeBook.series.name=e):"object"===Object(Y["a"])(e)&&null!==e&&e.id>0&&(this.activeBook.seriesId=e.id)},"activeBook.shelf":function(e){this.loading?this.$_console_log("Active book shelf watcher: Book is loading. Exiting."):"string"===typeof e?(this.activeBook.shelf=No(),this.activeBook.shelf.name=e):"object"===Object(Y["a"])(e)&&null!==e&&e.id>0&&(this.activeBook.shelfId=e.id)}},methods:{updateFilteredAuthorList:function(){var e=this;if("undefined"===typeof this.activeBook||null===this.activeBook||"undefined"===typeof this.activeBook.authors||null===this.activeBook.authors)return this.$_console_log("Something is invalid.. breaking out of filtered author list"),this.authorList;for(var t=this.authorList.slice(0),n=function(n){for(var i=0;i<e.authorList.length;i++)if(e.authorList[i].id===e.activeBook.authors[n].id){var o=t.findIndex((function(t){return t.id===e.activeBook.authors[n].id}));if(-1!==o){t.splice(o,1);break}}},i=0;i<this.activeBook.authors.length;i++)n(i);this.filteredAuthorList=t.slice(0)},updateFilteredGenreList:function(){var e=this;if("undefined"===typeof this.activeBook||"undefined"===typeof this.activeBook.genres||null===this.activeBook.genres)return this.$_console_log("Something is invalid.. breaking out of filtered genre list"),this.genreList;for(var t=this.genreList.slice(0),n=function(n){for(var i=0;i<e.genreList.length;i++)if(e.genreList[i].id===e.activeBook.genres[n].id){var o=t.findIndex((function(t){return t.id===e.activeBook.genres[n].id}));if(-1!==o){t.splice(o,1);break}}},i=0;i<this.activeBook.genres.length;i++)n(i);this.filteredGenreList=t.slice(0)},updateFilteredShelfList:function(){if("undefined"===typeof this.activeBook||"number"!==typeof this.activeBook.bookcaseId||null===this.activeBook)return this.$_console_log("Something is invalid.. breaking out of filtered shelf list"),[];var e=this.activeBook.bookcaseId;this.filteredShelfList=this.shelfList.filter((function(t){return t.bookcaseId===e}))},resetDialogFields:function(){this.authorToAdd=Ro(),this.authorSearch="",this.seriesIsLoading=!1,this.seriesSearch="",this.shelfIsLoading=!1,this.shelfSearch="",this.bookcaseIsLoading=!1,this.bookcaseSearch="",this.authorIsLoading=!1},addAuthorToBook:function(){if(Array.isArray(this.activeBook.authors)||(this.activeBook.authors=[]),"object"!==Object(Y["a"])(this.authorToAdd)&&(this.authorToAdd=Ro()),this.authorToAdd.id<=0&&"undefined"!==typeof this.authorSearch&&null!==this.authorSearch&&""!==this.authorSearch.trim()){var e=this.authorSearch.trim().split(" ");if(null===e)return;if(1===e.length)this.authorToAdd.lastName=e[0],this.authorToAdd.fullName=e[0];else{this.authorToAdd.firstName="",this.authorToAdd.fullName="";for(var t=0;t<e.length;t++)this.authorToAdd.fullName+="".concat(e[t]," "),t+1===e.length?this.authorToAdd.lastName=e[t]:this.authorToAdd.firstName+="".concat(e[t]," ");this.authorToAdd.firstName=this.authorToAdd.firstName.trim(),this.authorToAdd.fullName=this.authorToAdd.fullName.trim()}this.authorToAdd.fromAutocomplete=!1}else this.authorToAdd.fromAutocomplete=!0;this.activeBook.authors.push(this.authorToAdd),this.authorToAdd=Ro(),this.updateFilteredAuthorList()},addGenreToBook:function(){var e=this;if(Array.isArray(this.activeBook.genres)||(this.activeBook.genres=[]),"number"===typeof this.genreToAdd){var t=this.genreList.find((function(t){return t.id===e.genreToAdd}));"undefined"!==typeof t&&(this.activeBook.genres.push(t),this.genreToAdd=-1)}},deleteAuthor:function(e){var t=this;this.deletingAuthor=!0,this.$_console_log("[Library] Delete author at index ".concat(e)),this.$nextTick((function(){t.activeBook.authors.splice(e,1),t.deletingAuthor=!1,t.updateFilteredAuthorList()}))},deleteGenre:function(e){var t=this;this.deletingGenre=!0,this.$_console_log("[Library] Delete genre at index ".concat(e)),this.$nextTick((function(){t.activeBook.genres.splice(e,1),t.deletingGenre=!1,t.updateFilteredGenreList()}))},addSeries:function(){"undefined"!==typeof this.activeBook.series&&null!==this.activeBook.series||(this.activeBook.series=Io())},deleteSeries:function(){this.activeBook.series=null,this.activeBook.seriesId=null},addBookcase:function(){"undefined"!==typeof this.activeBook.bookcase&&null!==this.activeBook.bookcase||(this.activeBook.bookcase=Fo(),this.updateFilteredShelfList())},deleteBookcase:function(){this.activeBook.bookcase=null,this.activeBook.bookcaseId=null,this.activeBook.shelfId=null,this.activeBook.shelf=null,this.updateFilteredShelfList()},addShelf:function(){"undefined"!==typeof this.activeBook.shelf&&null!==this.activeBook.shelf||(this.activeBook.shelf=No(),this.updateFilteredShelfList())},deleteShelf:function(){this.activeBook.shelf=null,this.activeBook.shelfId=null,this.updateFilteredShelfList()},addOrUpdateBook:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$_console_log("[Library] Add or update book",e.activeBook),e.activeBook.id>0?(n=os(e.activeBook),e.$store.dispatch("editBook",n).then((function(t){e.$store.dispatch("pushNotification",{text:"Successfully updated the book in the list",type:0,group:{type:"library-book",value:"update"}}),e.activeBook=ss()})).catch((function(){e.$store.dispatch("pushNotification",{text:"Failed to update the book in the list",type:2,group:{type:"library-book",value:"update"}})})).then((function(){e.updateFilteredShelfList(),e.$emit("closeDialog",!0)}))):(i=os(e.activeBook),e.$store.dispatch("addBook",i).then((function(t){e.$store.dispatch("pushNotification",{text:"Successfully added a new book to the list",type:0,group:{type:"library-book",value:"add"}}),e.activeBook=ss()})).catch((function(){e.$store.dispatch("pushNotification",{text:"Failed to add a new book to the list",type:2,group:{type:"library-book",value:"add"}})})).then((function(){e.updateFilteredShelfList(),e.$emit("closeDialog",!0)})));case 2:case"end":return t.stop()}}),t)})))()}}},as=rs,ls=n("2b5d"),cs=Object(x["a"])(as,ns,is,!1,null,null,null),us=cs.exports;A()(cs,{VBtn:S["a"],VCard:ae["a"],VCardText:ze["b"],VCardTitle:ze["c"],VCheckbox:Qo["a"],VCombobox:ls["a"],VContainer:F["a"],VDialog:dn["a"],VFlex:He["a"],VLayout:qe["a"],VSelect:z["a"],VTextField:N["a"]});var ds={components:{"book-dialog":us,"depedency-editor-dialog":ts},data:function(){return{activeBook:{},bookSearch:"",dependencyEditorDialogOpen:!1,bookDialogOpen:!1,loadingBook:!1}},computed:Object(K["a"])(Object(K["a"])({},Object($["b"])({authorList:function(e){return e.library.authors},bookList:function(e){return e.library.books},bookcaseList:function(e){return e.library.bookcases},genreList:function(e){return e.library.genres},seriesList:function(e){return e.library.series},shelfList:function(e){return e.library.shelves}})),{},{getHeaders:function(){return[{value:"title",alignment:"left",text:"Title"},{value:"authors",alignment:"left",text:"Authors"},{value:"edition",alignment:"left",text:"Edition",class:"hidden-sm-and-down"},{value:"genres",alignment:"left",text:"Genres",class:"hidden-xs-only"},{value:"publicationDate",alignment:"left",text:"Date",class:"hidden-sm-and-down"},{value:"hardcover",alignment:"left",text:"Hardcover",class:"hidden-xs-only"},{value:"isRead",alignment:"left",text:"Read",class:"hidden-xs-only"},{value:"boxset",alignment:"left",text:"Boxset",class:"hidden-sm-and-down"},{value:"loaned",alignment:"left",text:"Loaned Out",class:"hidden-sm-and-down"},{value:"bookcase",alignment:"left",text:"Bookcase"},{value:"series",alignment:"left",text:"Series",class:"hidden-xs-only"},{value:"delete",alignment:"left",text:""}]}}),mounted:function(){this.getData()},methods:{getData:function(){var e=this;return Object(L["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$_console_log("[Library] Get book list"),e.$store.dispatch("getAuthors"),e.$store.dispatch("getBooks"),e.$store.dispatch("getBookcases"),e.$store.dispatch("getGenres"),e.$store.dispatch("getSeries"),e.$store.dispatch("getShelves");case 7:case"end":return t.stop()}}),t)})))()},getCleanDate:function(e){return e?(e=e.toString(),console.log(e),e.endsWith("T00:00:00")?e.substring(0,e.indexOf("T00:00:00")):e):""},setActiveBook:function(e){if(this.activeBook=Object.assign({},e),this.activeBook.publicationDate=this.getCleanDate(this.activeBook.publicationDate),"undefined"!==typeof this.activeBook.bookAuthors&&null!==this.activeBook.bookAuthors){this.activeBook.authors=[];for(var t=0;t<this.activeBook.bookAuthors.length;t++)if("undefined"!==typeof this.activeBook.bookAuthors[t].author&&null!==this.activeBook.bookAuthors[t].author){var n=this.activeBook.bookAuthors[t].author;n.fromAutocomplete=!0,this.activeBook.authors.push(n)}}if("undefined"!==typeof this.activeBook.bookGenres&&null!==this.activeBook.bookGenres){this.activeBook.genres=[];for(var i=0;i<this.activeBook.bookGenres.length;i++)"undefined"!==typeof this.activeBook.bookGenres[i].genre&&null!==this.activeBook.bookGenres[i].genre&&this.activeBook.genres.push(this.activeBook.bookGenres[i].genre)}delete this.activeBook.bookAuthors,delete this.activeBook.bookGenres},openAddOrEditBookDialog:function(e,t){if(this.$_console_log("[Library] Open add or edit dialog"),this.$_console_log(e),null!==t&&(t.target.classList.contains("v-btn__content")||t.target.parentNode.classList.contains("v-btn__content")||t.target.parentNode.parentNode.classList.contains("v-btn__content")))this.$_console_log("Some button was pressed, don't open the dialog.");else{if("undefined"===typeof e||null===e)this.$_console_log("[Library] OpenAddOrEditBookDialog: Object is null or undefined"),this.activeBook=null;else{var n=this;this.loadingBook=!0,setTimeout((function(){n.setActiveBook(e),setTimeout((function(){n.loadingBook=!1}),15)}),5)}this.bookDialogOpen=!0}},getTitle:function(e){if("undefined"!==typeof e&&null!==e)return"undefined"===typeof e.subTitle||null===e.subTitle||""===e.subTitle?e.title:"".concat(e.title," : ").concat(e.subTitle)},deleteBook:function(e){var t=this;"undefined"!==typeof e&&null!==e&&this.$store.dispatch("deleteBook",e.id).then((function(e){t.$store.dispatch("pushNotification",{text:"Successfully deleted the book from the list",type:0,group:{type:"library-book",value:"delete"}})})).catch((function(){t.$store.dispatch("pushNotification",{text:"Failed to delete the book from the list",type:2,group:{type:"library-book",value:"delete"}})}))},getBookcaseName:function(e){if("undefined"!==typeof e&&null!==e&&"undefined"!==e.bookcase&&null!==e.bookcase)return e.bookcase.name},hasSeriesInfo:function(e){return"undefined"!==typeof e&&null!==e&&"undefined"!==e.series&&null!==e.series},getPublicationDate:function(e){if(null===e)return"";var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(Vo(t.getMonth()),"-").concat(Vo(t.getDate()))},closeDependencyEditorDialogWindow:function(){this.$_console_log("[Close Depedency Editor Dialog Window] Reset value is:"),this.dependencyEditorDialogOpen=!1},closeBookDialogWindow:function(e){this.$_console_log("[Close Book Dialog Window] Reset value is: ".concat(e)),this.bookDialogOpen=!1,this.activeBook=null}}},hs=ds,fs=Object(x["a"])(hs,Mo,Ao,!1,null,null,null),ps=fs.exports;A()(fs,{VBtn:S["a"],VContainer:F["a"],VDataTable:Oo["a"],VFlex:He["a"],VTextField:N["a"]});var ms=[{path:"/",name:"index",component:w,display:"Login",meta:{authLevel:f.Level.Default},children:[{path:"login",name:"login",component:V,display:"Login"},{path:"register",name:"register",component:q,display:"Register"}]},{path:"/home",name:"home",component:Ae,display:"Home",meta:{authLevel:f.Level.Default},children:[{path:"start",name:"start",component:Ve,display:"Home",meta:{authLevel:f.Level.Default,hidden:!1}},{path:"profile",name:"profile",component:Je,display:"Profile",meta:{authLevel:f.Level.Default,hidden:!0}},{path:"admin-tools",name:"admin-tools",component:At,display:"Admin Tools",meta:{authLevel:f.Level.Admin,hidden:!1}},{path:"chat",name:"chat",component:jn,display:"Chat",meta:{authLevel:f.Level.General,hidden:!1}},{path:"browser",name:"browser",component:Fi,display:"Browser",meta:{authLevel:f.Level.General,hidden:!1}},{path:"browser/:folder*",name:"browser-folder",component:Fi,display:"Browser",meta:{relative:"browser",authLevel:f.Level.General,hidden:!0}},{path:"notes",name:"notes",component:eo,display:"Notes",meta:{authLevel:f.Level.General,hidden:!1}},{path:"doc",name:"documentation",component:lo,display:"Documentation",meta:{authLevel:f.Level.General,hidden:!0},children:[{path:":id",name:"documentation-item",component:vo,display:"Documentation",meta:{relative:"documentation",authLevel:f.Level.General,hidden:!0}}]},{path:"weight",name:"weight",component:Do,display:"Weight",meta:{authLevel:f.Level.General,hidden:!1}},{path:"library",name:"library",component:ps,display:"Library",meta:{authLevel:f.Level.General,hidden:!1}}]}];i["default"].use(h["a"]);var vs=new h["a"]({mode:"history",routes:ms});vs.beforeEach((function(e,t,n){var i=j.state.auth.role,o=C.methods.$_auth_convertRole(i);O.methods.$_console_log("To:",e),o===f.Level.Admin||"index"===e.name||"login"===e.name||"register"==e.name||e.meta.authLevel===f.Level.None||!0===j.state.auth.isAuthorize&&e.meta.authLevel<=f.Level.Default?n():!0===j.state.auth.isAuthorize&&e.meta.authLevel>o?(O.methods.$_console_log("[Router] beforeEach: DENIED. User is not authorized or does not have sufficient access level"),n("/home/start")):Z.methods.$_module_userHasModule(e)?n():(O.methods.$_console_log("[Router] beforeEach: DENIED. User does not have access to this module"),n(!1))}));var gs=vs,bs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("v-app",[n("router-view")],1)],1)},xs=[],ys={data:function(){return{}},created:function(){this.refreshTokenJob()},methods:{refreshTokenJob:function(){var e=this;Object(ee["setTimeout"])((function(){if(e.$store.state.auth.isAuthorize){var t=kt(e.$store.state.auth.accessToken),n=(new Date).getTime()/1e3;n+p.RefreshTokenTimer/1e3>=t.exp&&(e.$_console_log("Token timeout is about to be reached. Getting new token"),e.$store.dispatch("refreshToken").then((function(){})).catch((function(){return e.$_console_log("Failed to get time released refresh token")})))}e.refreshTokenJob()}),p.RefreshTokenTimer)}}},ws=ys,_s=n("7496"),ks=Object(x["a"])(ws,bs,xs,!1,null,null,null),Ls=ks.exports;A()(ks,{VApp:_s["a"]});var $s=n("4f89"),js=n.n($s);t["default"]=new Vuetify({icons:{iconfont:"mdi"}});i["default"].use(Vuetify),i["default"].use(s.a),i["default"].use(js.a),i["default"].use(d),i["default"].component("fa-icon",c["a"]),i["default"].mixin(O),Object(r["sync"])(j,gs),i["default"].config.productionTip=!1,new i["default"]({vuetify:l,store:j,router:gs,render:function(e){return e(Ls)}}).$mount("#app")},5787:function(e,t,n){"use strict";n("0c8b")},7967:function(e){e.exports=JSON.parse('[{"id":"Ipsum","title":"Your title","topic":"Your topic","sections":[{"title":"Section title","paragraphs":[{"text":"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum ","style":"red--text text-xs-center "},{"text":"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum ","style":"blue--text text-xs-right"},{"text":"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum ","style":"green--text text-xs-left"},{"text":"Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum ","style":"black--text purple--lighten-3"}]}]},{"id":"Two","title":"Your title2","topic":"Your topic2","sections":[{"title":"Section title2","paragraphs":[{"text":"Paragraph 1 Section 2","style":"orange--text text-xs-left"},{"text":"Paragraph 2 Section 2","style":"orange--text text-xs-left"},{"text":"Paragraph 3 Section 2","style":"orange--text text-xs-left"},{"text":"Paragraph 4 Section 2","style":"orange--text purple--left-3"}]}]},{"id":"Three","title":"It\'s another title!","topic":"Some random topic or heading or whatever you know","sections":[{"title":"Section start:","paragraphs":[{"text":"Paragraph 1 Section 1","style":"orange--text text-xs-left"},{"text":"Paragraph 2 Section 1","style":"orange--text text-xs-left"},{"text":"Paragraph 3 Section 1","style":"orange--text text-xs-left"},{"text":"Paragraph 4 Section 1","style":"orange--text purple--left-3"}]},{"title":"Section start2:","paragraphs":[{"text":"Paragraph 1 Section 2","style":"blue--text text-xs-left"},{"text":"Paragraph 2 Section 2","style":"blue--text text-xs-left"},{"text":"Paragraph 3 Section 2","style":"blue--text text-xs-left"},{"text":"Paragraph 4 Section 2","style":"blue--text purple--left-3"}]},{"title":"Section start3:","paragraphs":[{"text":"Paragraph 1 Section 3","style":"purple--text text-xs-left"},{"text":"Paragraph 2 Section 3","style":"purple--text text-xs-left"},{"text":"Paragraph 3 Section 3","style":"purple--text text-xs-left"},{"text":"Paragraph 4 Section 3","style":"purple--text text-xs-left"}]},{"title":"Section start4:","paragraphs":[{"text":"Paragraph 1 Section 4","style":"red--text text-xs-left"},{"text":"Paragraph 2 Section 4","style":"red--text text-xs-left"},{"text":"Paragraph 3 Section 4","style":"red--text text-xs-left"},{"text":"Paragraph 4 Section 4","style":"red--text purple--left-3"}]}]}]')},"8bdb":function(e,t,n){"use strict";n("0496")},"8ec8":function(e,t,n){"use strict";n("caa6")},"9f66":function(e,t,n){"use strict";n("f37e")},a02e:function(e,t,n){},adb8:function(e,t,n){},b2fa:function(e,t,n){},bbb5:function(e,t,n){"use strict";n("2904")},c084:function(e,t,n){"use strict";n("49f5")},caa6:function(e,t,n){},cd52:function(e,t,n){"use strict";n("b2fa")},cf39:function(e,t,n){},e29a:function(e,t,n){"use strict";n("0e08")},f37e:function(e,t,n){}});
//# sourceMappingURL=app.24bc7d2a.js.map